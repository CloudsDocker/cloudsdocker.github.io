<!DOCTYPE html>





<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.8.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta name="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
<meta property="og:type" content="website">
<meta property="og:title" content="Clouds &amp; Docker">
<meta property="og:url" content="http://www.todzhang.com/page/7/index.html">
<meta property="og:site_name" content="Clouds &amp; Docker">
<meta property="og:description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Clouds &amp; Docker">
<meta name="twitter:description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
  <link rel="canonical" href="http://www.todzhang.com/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Clouds & Docker</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Clouds & Docker</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    

  <a href="https://github.com/CloudsDocker" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2016-12-24-Apache-Tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2016-12-24-Apache-Tips/" class="post-title-link" itemprop="url">Apache Tips</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo su -</span><br><span class="line">apachectl start</span><br><span class="line">apachectl stop</span><br></pre></td></tr></table></figure>

<p>Open a browser to access <a href="http://localhost/" target="_blank" rel="noopener">http://localhost/</a></p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2017-01-02-Enum-Misc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2017-01-02-Enum-Misc/" class="post-title-link" itemprop="url">Java Enum Misc</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Enum-Misc"><a href="#Enum-Misc" class="headerlink" title="Enum Misc"></a>Enum Misc</h1><ul>
<li>All enums implicitely extends <strong>java.lang.Enum</strong></li>
<li>Enum in Java are <strong>type-safe</strong></li>
<li>You can specify values of enum constants at the <strong>creation</strong> time. <strong>Enum.values()</strong> returns an array of MyEnum’s values.</li>
<li>Enum constants are implicitly static and final and can not be changed once created.</li>
<li>Enum can be safely compare using:<ul>
<li>Switch-Case Statement</li>
<li>== Operator</li>
<li>.equals() method</li>
</ul>
</li>
<li>You can not create instance of enums by using new operator in Java because constructor of Enum in Java can only be private and Enums constants can only be created inside Enums itself.</li>
<li>Instance of Enum in Java <strong>is created when</strong> any Enum constants are <strong>first called or referenced</strong> in code.</li>
<li>An enum can be declared outside or inside a class, but NOT in a method.</li>
<li>An enum declared outside a class must NOT be marked static, final , abstract, protected , or private</li>
<li>Enums can contain constructors, methods, variables, and constant class bodies.</li>
<li>enum constructors can have arguments, and can be overloaded.</li>
<li>enum constructors can NEVER be invoked directly in code. They are always called automatically when an enum is initialized.</li>
<li>The semicolon at the end of an enum declaration is optional.</li>
</ul>
<p>These are legal:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Foo &#123; ONE, TWO, THREE&#125;</span><br><span class="line"><span class="keyword">enum</span> Foo &#123; ONE, TWO, THREE&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="type-safe"><a href="#type-safe" class="headerlink" title="type safe"></a>type safe</h1><p>The advantage of this style of enumeration over the C/C++-style enum or constants is that they are <strong>type-safe</strong>, meaning that, for example, if you define a method</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuit</span><span class="params">(Suit suit)</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>the caller cannot pass in a value that does not correspond to an enumeration value</p>
<h1 id="Language-level-features"><a href="#Language-level-features" class="headerlink" title="Language level features"></a>Language level features</h1><ul>
<li>Since enumeration instances are all effectively <strong>singletons</strong>, they can be compared for equality using identity (“==”).</li>
<li>In Java 5.0, the enum keyword is introduced as a special type of class that always extends <strong>java.lang.Enum</strong>.</li>
<li>Note that the enumeration values are still <strong>static class members</strong>, though not declared as such.</li>
<li>Enum is implemented using <strong>Arrays and common operations result in constant time</strong>. So if you are thinking of an high-performance Map, EnumMap could be a decent choice for enumeration data. We have already seen many examples of Java enum in our article 10 Examples of enum in Java  and using Enum as thread-safe Singleton. In this Java tutorial, we will see simple examples of using EnumMap in Java. </li>
<li>All keys used in EnumMap must be  from same Enum type which is specified while creating EnumMap in Java. For example if you can not use different enum instances from two different enum.</li>
<li>EnumMap is ordered collection and they are maintained in the natural order of their keys( natural order of keys means  the order on which enum constant are declared inside enum type ). you can verify this while Iterating over an EnumMap in Java.</li>
<li>Iterators of EnumMap are fail-fast Iterator , much like of ConcurrentHashMap and doesn’t throw ConcurrentModificationException and may not show effect of any modification on EnumMap during Iteration process.</li>
<li>You can not insert null keys inside EnumMap in Java.  EnumMap doesn’t allow null key and throw NullPointerException, at same time null values are permitted.</li>
<li>EnumMap is not synchronized and it has to be synchronized manually before using it in a concurrent or multi-threaded environment. like synchronized Map in Java  you can also make EnumMap synchronized by using Collections.synchronizedMap() method and as per javadoc this should be done while creating EnumMap in java to avoid accidental non synchronized access.</li>
<li>The constructor of enum in java must be private any other access modifier will result in compilation error. Now to get the value associated with each coin you can define a public getValue() method inside Java enum like any normal Java class. Also, the semicolon in the first line is optional.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Currency &#123;</span><br><span class="line">        PENNY(<span class="number">1</span>), NICKLE(<span class="number">5</span>), DIME(<span class="number">10</span>), QUARTER(<span class="number">25</span>);</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Currency</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>Since constants defined inside Enum in Java are <strong>final</strong> you can <strong>safely compare them using “==”</strong>, the equality operator as shown in following example of  Java Enum:</li>
<li>Java compiler automatically generates static values() method for every enum in java. Values() method returns array of Enum constants in the same order they have listed in Enum and you can use values() to iterate over values of Enum  in Java as shown in below example. Notice <strong>the order is exactly the same as defined order</strong> in the Enum.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(Currency coin: Currency.values())&#123;</span><br><span class="line">   System.out.println(<span class="string">"coin: "</span> + coin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>In Java, Enum can override methods also. Let’s see an example of overriding toString() method inside Enum in Java to provide a meaningful description for enums constants.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Currency &#123;</span><br><span class="line">  ........</span><br><span class="line">      </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">switch</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">         <span class="keyword">case</span> PENNY:</span><br><span class="line">              System.out.println(<span class="string">"Penny: "</span> + value);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> NICKLE:</span><br><span class="line">              System.out.println(<span class="string">"Nickle: "</span> + value);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> DIME:</span><br><span class="line">              System.out.println(<span class="string">"Dime: "</span> + value);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> QUARTER:</span><br><span class="line">              System.out.println(<span class="string">"Quarter: "</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">super</span>.toString();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>EnumSet doesn’t have any public constructor instead it provides <strong>factory methods to create instance e.g. EnumSet.of()</strong> methods. This design allows EnumSet to internally choose between two different implementations depending upon the size of Enum constants.</li>
</ul>
<p>If Enum has <strong>less than 64 constants than EnumSet uses RegularEnumSet</strong> class which internally uses a long variable to store those 64 Enum constants and if Enum has more keys than 64 then it uses JumboEnumSet. See my article the difference between RegularEnumSet and JumboEnumSet for more details.</p>
<ul>
<li>An instance of Enum in Java is created when any Enum constants are first called or referenced in code.</li>
<li>Enum in Java can *<em>implement the interface and override any method *</em>like normal class It’s also worth noting that Enum in java implicitly implements both Serializable and Comparable interface. Let’s see and example of how to implement interface using Java Enum:</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Currency implements Runnable&#123;</span><br><span class="line">  PENNY(<span class="number">1</span>), NICKLE(<span class="number">5</span>), DIME(<span class="number">10</span>), QUARTER(<span class="number">25</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">  ............</span><br><span class="line">        </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"Enum in Java implement interfaces"</span>);</span><br><span class="line">                </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>You can define abstract methods inside Enum in Java and can also provide a different implementation for different instances of enum in java.  Let’s see an example of using abstract method inside enum in java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">enum</span> Currency &#123;</span><br><span class="line">        PENNY(<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">color</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"copper"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        NICKLE(<span class="number">5</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">color</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"bronze"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        DIME(<span class="number">10</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">color</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"silver"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        QUARTER(<span class="number">25</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">color</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"silver"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">color</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Currency</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In this example since every coin will have the different color we made the color() method abstract and let each instance of Enum to define  their own color. You can get color of any coin by just calling the color() method as shown in below example of Java Enum:</p>
<p>System.out.println(“Color: “ + Currency.DIME.color());</p>
<p>So that was the comprehensive list of properties, behavior and capabilities of Enumeration type in Java. I know, it’s not easy to remember all those powerful features and that’s why I have prepared this small Microsoft powerpoint slide containing all important properties of Enum in Java. You can always come back and check this slide to revise important features of Java Enum.</p>
<h1 id="RegularEnumSet-vs-JumboEnumSet"><a href="#RegularEnumSet-vs-JumboEnumSet" class="headerlink" title="RegularEnumSet vs. JumboEnumSet"></a>RegularEnumSet vs. JumboEnumSet</h1><ul>
<li>Since Enum always has fixed number of instances, data-structure which is used to store Enum can be optimized depending upon number of instances and that’s why we have two different implementation of EnumSet in Java. We will take a closer look on this concept in next paragraph.</li>
<li>How EnumSet is implemented in Java<br>EnumSet is an abstract class and it provides two concrete implementations, java.util.RegularEnumSet and java.util.JumboEnumSet. Main difference between RegularEnumSet and JumboEnumSet is that former uses a long variable to store elements while later uses a long[] to store its element. Since RegularEnumSet uses long variable, which is a 64 bit data type, it can only hold that much of element. That’s why when an empty EnumSet is created using EnumSet.noneOf() method, it choose RegularEnumSet if key universe (number of enum instances in Key Enum) is less than or equal to 64 and JumboEnumSet if key universe is more than 64. Here is the code which does that :</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;E extends Enum&lt;E&gt;&gt; <span class="function">EnumSet&lt;E&gt; <span class="title">noneOf</span><span class="params">(Class&lt;E&gt; elementType)</span> </span>&#123;   </span><br><span class="line">        .. ............ </span><br><span class="line">        <span class="keyword">if</span> (universe.length &lt;= <span class="number">64</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> RegularEnumSet&lt;E&gt;(elementType, universe);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> JumboEnumSet&lt;E&gt;(elementType, universe);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>EnumSet is <strong>not thread-safe</strong>, which means if it needs to be externally synchronized, when multiple thread access it and one of them modifies the Collection.</li>
<li>EnumSet can not be used to store any other object <strong>except Enum</strong>, at the same time you can not store instances of two different Enum.</li>
<li>EnumSet doesn’t allow Null elements.</li>
<li>EnumSet Iterators are fail-safe in nature.</li>
</ol>
<h1 id="Difference-between-EnumMap-vs-HashMap"><a href="#Difference-between-EnumMap-vs-HashMap" class="headerlink" title="Difference between EnumMap vs HashMap"></a>Difference between EnumMap vs HashMap</h1><ul>
<li>Internally EnumMap is represented using Array and provides constant time performance for common methods e.g. get() or put(). Now let’s see few differences between EnumMap vs HashMap :</li>
<li>As said earlier, first and foremost difference between EnumMap and HashMap is that EnumMap is optimized for enum keys while HashMap is a general purpose Map implementation similar to Hashtable. you can not use any type other than Enum as key in EnumMap but you can use both Enum and any other Object as key in HashMap.</li>
<li>Another difference between EnumMap and HashMap is <strong>performance</strong>. as discussed in the previous point, due to specialized optimization done for Enum keys, EnumMap is likely to perform better than HashMap when using enum as key object.</li>
<li>One more thing which can be considered as the difference between HashMap and EnumMap is <strong>the probability of Collision</strong>. Since <strong>Enum is internally maintained as array ** and they are **stored in their natural order using ordinal()</strong>, as shown in following code which is taken from put() method of EnumMap.<br>Since EnumMap doesn’t call hashCode method on keys, there is no chance of collision.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> index = ((Enum)key).ordinal();</span><br><span class="line">    Object oldValue = vals[index];</span><br><span class="line">    vals[index] = maskNull(value);</span><br></pre></td></tr></table></figure>

<ul>
<li>you can use both == and equals() method to compare Enum, they will produce same result because equals() method of Java.lang.Enum internally uses == to compare enum in Java. Since every Enum in Java implicitly extends java.lang.Enum ,and since equals() method is declared final, there is no chance of overriding equals method in user defined enum</li>
<li>But there are still some slight difference, because  ==  (equality operator) being operator and equals() being method.</li>
<li><ul>
<li>Using == for comparing Enum can prevent NullPointerException</li>
</ul>
</li>
<li><ul>
<li>== method provides type safety during compile time</li>
</ul>
</li>
</ul>
<ul>
<li>A <strong>fail-fast</strong> system is nothing but immediately report any failure that is likely to lead to failure. When a problem occurs, a fail-fast system fails immediately. In Java, we can find this behavior with iterators. Incase, you have called iterator on a collection object, and another thread tries to modify the collection object, then concurrent modification exception will be thrown. This is called fail-fast. - See more at: </li>
</ul>
<h1 id="Real-world-Examples-of-Enum-in-Java"><a href="#Real-world-Examples-of-Enum-in-Java" class="headerlink" title="Real world Examples of Enum in Java"></a>Real world Examples of Enum in Java</h1><ol>
<li>Enum as Thread Safe Singleton</li>
<li>Strategy Pattern using Enum. to implement the Strategy interface and define individual strategy</li>
<li>Enum as replacement of Enum String or int pattern. There is now no need to use String or integer constant to represent fixed set of things e.g. status of object like ON and OFF for a button or START, IN PROGRESS and DONE for a Task. Enum is much better suited for those needs as it provide compile time type safety and better debugging assistent than String or Integer.</li>
<li>Enum as State Machine</li>
<li>Enum Java valueOf example. “You could also include valueOf() method of enum in java which is added by compiler in any enum along with values() method. Enum valueOf() is a static method which takes a string argument and can be used to convert a String into an enum. One think though you would like to keep in mind is that valueOf(String) method of enum will throw “Exception in thread “main” java.lang.IllegalArgumentException: No enum const class” if you supply any string other than enum values.</li>
</ol>
<h1 id="Reverse-lookup"><a href="#Reverse-lookup" class="headerlink" title="Reverse lookup"></a>Reverse lookup</h1><p>Often in your object model it is common to have data that is naturally “associated” with an enumeration. Since an enum is a class, it is easy to represent this associated information as class fields. Often it is desirable to “lookup” the associated enumeration using the field value. This is easy to do using a static java.util.Map. Take, for example, a Status enum that has an associated status code.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Status</span><br><span class="line">&#123;</span><br><span class="line">     WAITING(<span class="number">0</span>),</span><br><span class="line">     READY(<span class="number">1</span>),</span><br><span class="line">     SKIPPED(-<span class="number">1</span>),</span><br><span class="line">     COMPLETED(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;Integer,Status&gt; lookup</span><br><span class="line">          = <span class="keyword">new</span> HashMap&lt;Integer,Status&gt;();</span><br><span class="line"></span><br><span class="line">     <span class="keyword">static</span> &#123;</span><br><span class="line">          <span class="keyword">for</span>(Status s : EnumSet.allOf(Status.class))</span><br><span class="line">               lookup.put(s.getCode(), s);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">int</span> code;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="title">Status</span><span class="params">(<span class="keyword">int</span> code)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.code = code;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> code; &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Status <span class="title">get</span><span class="params">(<span class="keyword">int</span> code)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> lookup.get(code);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Sleek-EnumMap"><a href="#Sleek-EnumMap" class="headerlink" title="Sleek EnumMap"></a>Sleek EnumMap</h1><p>Why would I use an EnumMap rather than a HashMap?  The primary reasons boil down to some inherent advantages of Java’s enum as stated in the Javadoc documentation for EnumMap: “Enum maps are represented internally as arrays. This representation is extremely compact and efficient.” Later in the same Javadoc documentation, there is an “Implementation Note” that states: “All basic operations execute in constant time. They are likely (though not guaranteed) to be faster than their HashMap counterparts.”</p>
<p>The Javadoc documentation states similar advantages for the EnumSet over the HashSet:</p>
<blockquote>
<p>Enum sets are represented internally as <strong>bit vectors</strong>. This representation is extremely <strong>compact and efficient</strong>. The space and time performance of this class should be good enough to allow its use as a high-quality, typesafe alternative to traditional int-based ‘bit flags.’  … Implementation note: All basic operations execute <strong>in constant time</strong>. They are likely (though not guaranteed) to be much faster than their HashSet counterparts. Even <strong>bulk operations execute in constant time</strong> if their argument is also an enum set.</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://crunchify.com/why-and-for-what-should-i-use-enum-java-enum-examples/" target="_blank" rel="noopener">http://crunchify.com/why-and-for-what-should-i-use-enum-java-enum-examples/</a></li>
<li><a href="http://www.ajaxonomy.com/2007/java/making-the-most-of-java-50-enum-tricks" target="_blank" rel="noopener">http://www.ajaxonomy.com/2007/java/making-the-most-of-java-50-enum-tricks</a></li>
<li><a href="http://www.javaworld.com/article/2073430/the-sleek-enummap-and-enumset.html" target="_blank" rel="noopener">http://www.javaworld.com/article/2073430/the-sleek-enummap-and-enumset.html</a></li>
<li><a href="http://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html#ixzz4W6bC2mUV" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html#ixzz4W6bC2mUV</a></li>
<li><a href="http://javarevisited.blogspot.in/2011/08/enum-in-java-example-tutorial.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2011/08/enum-in-java-example-tutorial.html</a></li>
<li><a href="http://www.java67.com/2013/11/difference-between-regularenumset-and-jumboenumset-java.html#ixzz4WANO22q5" target="_blank" rel="noopener">http://www.java67.com/2013/11/difference-between-regularenumset-and-jumboenumset-java.html#ixzz4WANO22q5</a></li>
<li><a href="http://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html#ixzz4WAP43bUB" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html#ixzz4WAP43bUB</a></li>
<li><a href="http://javarevisited.blogspot.com/2012/09/difference-between-enummap-and-hashmap-in-java-vs.html#ixzz4WAQcrjkC" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2012/09/difference-between-enummap-and-hashmap-in-java-vs.html#ixzz4WAQcrjkC</a></li>
<li><a href="http://javarevisited.blogspot.com/2013/04/how-to-compare-two-enum-in-java-equals.html#ixzz4WARs9slQ" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2013/04/how-to-compare-two-enum-in-java-equals.html#ixzz4WARs9slQ</a></li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2017-01-03-IntelliJ-Tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2017-01-03-IntelliJ-Tips/" class="post-title-link" itemprop="url">IntelliJ Tips</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Shortcuts"><a href="#Shortcuts" class="headerlink" title="Shortcuts"></a>Shortcuts</h1><ul>
<li>Ctrl+J: To show JavaDoc</li>
<li>Cmd+Alt+B: To show interface implementations</li>
<li>Alt+Enter: when cursor on class declare line, press Alt+Enter can quickly create a unit test against this test class</li>
</ul>
<ul>
<li><p>Ctrl+Shift+A: Action window, just like sublime, search IDE actions</p>
</li>
<li><p>F11: add bookmark,</p>
</li>
<li><p>Shift+F11: show bookmarks</p>
</li>
<li><p>Shift + Escape: close bottom source pannel or left side barGo to settings, Editor-&gt;General-&gt;Mouse-&gt; change font size (Zoom)</p>
</li>
<li><p>Alt + F: Git refresh : Assign it in Intellij key map</p>
</li>
<li><p>Ctrl + T: swich different editorsAlt + F1: Show in , then preses ‘1’ to show file in project viewer, like “scroll from source”use Ctrl+Q to show quick documentation for the element at caret. to show javadocAlt + F12: to open terminal window, then ‘mvn package’</p>
</li>
<li><p>Ctrl+I: implement methodsAlt+A: code completion, this is customized in keymap, for ‘basic’Press Tab / Shift+Tab. To change indentation of a text fragmentCtrl+Alt+I To fix indentationCtrl+D  Duplicate Line or SelectionAlt + Insert: generate code (getter or setter, toString)Ctrl+F12: List all opened files, press Enter to selectAlt+1: to show the project tree window, press Alt+1 again will close the project structureAlt+7: show structureGo to interface implementations, the shortcut In PC, it is CTRL + ALT + B: JetBrains navigation documentation.</p>
</li>
<li><p>maximize edito pane: Ctrl + Shift + F12 (Default keymap).- Ctrl+R: repalce- F6: move file, Shift+F6: rename file- Ctrl+Alt+ &lt;-: go back to previous position- Ctrl+Alt+S: show settings- bookmakr: F11 toggle for annonymous bookmark, Shift+F11: show all bookmarks. Ctrl+F11: then press 0,1,2,3, etc. then Ctrl +1, Ctrl +3, to go to that bookmarkmaster password: hello123- copy file name: focus file in “project view”, press Ctrl+C- Incremental search: Ctrl+F, then use up/down arrow keys to navigate- Ctrl+Shift+N: open files by file name pattern- Press Ctrl+Shift+B . Press the Ctrl+Shift keys and hover your mouse pointer over the symbol. When the symbol turns to a hyperlink, click it without releasing Ctrl+Shift keys. The type declaration of the symbol opens in the editor.</p>
</li>
<li><p>Ctrl+Shift+F7: highlight all references (of selected method)<br>put carpet on a name, Ctrl+B will show the definition<br>Ctrl+Shift+Alt+F: copy current file name</p>
</li>
<li><ul>
<li>go to matching braceCtrl+} will move to the close bracket.Ctrl+{ will move to the open bracket</li>
</ul>
</li>
<li><ul>
<li>split editorgo to menu “window” -&gt; “editor tabs” -&gt; split<br>Firslty open wealth-access-ui project, which only contains files at root, then right click in left pane, and chose import wealth-acecss-ui, it will load module.Use F2/Shift+F2 keys to jump between highlighted syntax errors.Use Ctrl+Alt+Up/Ctrl+Alt+Down shortcuts to jump between compiler error messages or search operation results.Use Ctrl+J to complete any valid Live Template abbreviation if you don’t remember it. For example, type it and press Ctrl+J to see what happens.</li>
</ul>
</li>
<li><p>Navigating to the declaration of a symbol<br>Place the caret at the desired symbol in the editor.Do one of the following:On the main menu, choose Navigate | Declaration.Press Ctrl+B.Click the middle mouse button.Keeping Ctrl pressed, point to the symbol, and click, when it turns to a hyperlink. You can also see declaration at the tooltip while keeping Ctrl pressed.</p>
</li>
</ul>
<p>Ctrl+Shift+A: Action window, just like sublime, search IDE actions<br>F11: add bookmark,<br>Shift+F11: show bookmarks<br>Shift + Escape: close bottom source pannel or left side bar<br>Go to settings, Editor-&gt;General-&gt;Mouse-&gt; change font size (Zoom)<br>Alt + F: Git refresh : Assign it in Intellij key map<br>Ctrl + T: swich different editors<br>Alt + F1: Show in , then preses ‘1’ to show file in project viewer, like “scroll from source”<br>use Ctrl+Q to show quick documentation for the element at caret. to show javadoc<br>Alt + F12: to open terminal window, then ‘mvn package’<br>Ctrl+I: implement methods<br>Alt+A: code completion, this is customized in keymap, for ‘basic’<br>Press Tab / Shift+Tab. To change indentation of a text fragment<br>Ctrl+Alt+I To fix indentation<br>Ctrl+D  Duplicate Line or Selection<br>Alt + Insert: generate code (getter or setter, toString)<br>Ctrl+F12: List all opened files, press Enter to select<br>Alt+1: to show the project tree window, press Alt+1 again will close the project structure<br>Alt+7: show structure<br>Go to interface implementations, the shortcut In PC, it is CTRL + ALT + B: JetBrains navigation documentation.</p>
<ul>
<li><p>maximize edito pane: Ctrl + Shift + F12 (Default keymap).</p>
</li>
<li><p>Ctrl+R: repalce</p>
</li>
<li><p>F6: move file, Shift+F6: rename file</p>
</li>
<li><p>Ctrl+Alt+ &lt;-: go back to previous position</p>
</li>
<li><p>Ctrl+Alt+S: show settings</p>
</li>
<li><p>bookmakr: F11 toggle for annonymous bookmark, Shift+F11: show all bookmarks. Ctrl+F11: then press 0,1,2,3, etc. then Ctrl +1, Ctrl +3, to go to that bookmark<br>master password: hello123</p>
</li>
<li><p>copy file name: focus file in “project view”, press Ctrl+C</p>
</li>
<li><p>Incremental search: Ctrl+F, then use up/down arrow keys to navigate</p>
</li>
<li><p>Ctrl+Shift+N: open files by file name pattern</p>
</li>
<li><p>Press Ctrl+Shift+B . Press the Ctrl+Shift keys and hover your mouse pointer over the symbol. When the symbol turns to a hyperlink, click it without releasing Ctrl+Shift keys. The type declaration of the symbol opens in the editor.</p>
</li>
<li><p>Ctrl+Shift+F7: highlight all references (of selected method)</p>
</li>
</ul>
<p>put carpet on a name, Ctrl+B will show the definition</p>
<p>Ctrl+Shift+Alt+F: copy current file name</p>
<p>– go to matching brace<br>Ctrl+} will move to the close bracket.<br>Ctrl+{ will move to the open bracket</p>
<p>– split editor<br>go to menu “window” -&gt; “editor tabs” -&gt; split</p>
<p>Firslty open wealth-access-ui project, which only contains files at root, then right click in left pane, and chose import wealth-acecss-ui, it will load module.<br>Use F2/Shift+F2 keys to jump between highlighted syntax errors.<br>Use Ctrl+Alt+Up/Ctrl+Alt+Down shortcuts to jump between compiler error messages or search operation results.<br>Use Ctrl+J to complete any valid Live Template abbreviation if you don’t remember it. For example, type it and press Ctrl+J to see what happens.</p>
<ul>
<li>Navigating to the declaration of a symbol</li>
</ul>
<p>Place the caret at the desired symbol in the editor.<br>Do one of the following:<br>On the main menu, choose Navigate | Declaration.<br>Press Ctrl+B.<br>Click the middle mouse button.<br>Keeping Ctrl pressed, point to the symbol, and click, when it turns to a hyperlink. You can also see declaration at the tooltip while keeping Ctrl pressed.</p>
<p>By defining a Scope when searching, you can include/exclude arbitrary files/folders from that scope.<br>Detailed Answer<br>One way to achieve your requirement (excluding files and folders from a search) is to define a custom scope. This is specifically useful because sometimes you just want to exclude a folder from your search and not from the whole project.<br>Follow these steps:<br>Edit -&gt; Find -&gt; Find in path or press Ctrl+Shift+F.Choose Custom in the Scope section and then choose <unknown scope></unknown></p>
<h2 id="how-to-add-xx-properties-project-to-xx-project-as-dependencies"><a href="#how-to-add-xx-properties-project-to-xx-project-as-dependencies" class="headerlink" title="how to add xx-properties project to xx project as dependencies"></a>how to add xx-properties project to xx project as dependencies</h2><p>select project and press F4 to open properites, chose ‘module’ in left pane and then click “+”, chose ‘import module’, then chose the properties project</p>
<h1 id="Intelij-classes"><a href="#Intelij-classes" class="headerlink" title="Intelij classes"></a>Intelij classes</h1><h2 id="Annotation-Nullable"><a href="#Annotation-Nullable" class="headerlink" title="Annotation Nullable"></a>Annotation Nullable</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 2000-2009 JetBrains s.r.o.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.jetbrains.annotations;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An element annotated with Nullable claims &lt;code&gt;null&lt;/code&gt; value is perfectly &lt;em&gt;valid&lt;/em&gt;</span></span><br><span class="line"><span class="comment"> * to return (for methods), pass to (parameters) and hold (local variables and fields).</span></span><br><span class="line"><span class="comment"> * Apart from documentation purposes this annotation is intended to be used by static analysis tools</span></span><br><span class="line"><span class="comment"> * to validate against probable runtime errors and element contract violations.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> max</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.CLASS)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER, ElementType.LOCAL_VARIABLE&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Nullable &#123;</span><br><span class="line">  <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2016-12-30-Java-GC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2016-12-30-Java-GC/" class="post-title-link" itemprop="url">Java GC notes</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="verbose-gc"><a href="#verbose-gc" class="headerlink" title="verbose:gc"></a>verbose:gc</h1><p><code>verbose:gc</code> prints right after each gc collection and prints details about each generation memory details. Here is blog on how to read verbose gc</p>
<p>If you are trying to look for memory leak, verbose:gc may not be enough. Use some visualization tools like jhat (or) visualvm etc.,</p>
<p> 4416K-&gt;512K(4928K), 0.0081170 secs</p>
<p>Before GC used memory is 4416K<br>After GC used memory is 512K<br>Total allocated memory is 4928K</p>
<p>-verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:C:/Users/tzhang17/temp/gc/gc.log</p>
<p>a typical ratio of YoungGen vs. OldGen is 1:3 or 33%.</p>
<p>Minimizing the frequency of major GC collections is a key aspect for optimal performance so it is very important that you understand and estimate how much memory you need during your peak volume.</p>
<p>Again, your type of application and data will dictate how much memory you need. Shopping cart type of applications (long lived objects) involving large and non-serialized session data typically need large Java Heap and lot of OldGen space. Stateless and XML processing heavy applications (lot of short lived objects) require proper YoungGen space in order to minimize frequency of major collections.</p>
<h2 id="Generational-collection"><a href="#Generational-collection" class="headerlink" title="Generational collection"></a>Generational collection</h2><p>According to the generational hypothesis [21], most objects die young and consequently older objects tend to live longer. Generational collection capitalises on the generational hypothesis by dividing the available memory space into multiple regions called generations. Garbage collector passes are less frequent as the generations grow older and objects are always allocated into the newest generation. If the object survives a garbage collection, it is promoted to an older generation. Each generation can have a<br>separate garbage collection strategy.</p>
<h2 id="Reference-counting"><a href="#Reference-counting" class="headerlink" title="Reference counting"></a>Reference counting</h2><p> Reference counting uses a counter per object to record the number of<br>references to the object. The pointer is incremented each time a reference towards the<br>object is created. The object is reclaimed when its reference count drops to zero. Reference<br>counting is being extensively used by scripting languages such as Perl.</p>
<h2 id="GC-strategy"><a href="#GC-strategy" class="headerlink" title="GC strategy"></a>GC strategy</h2><p>Mark-Sweep garbage collection is most times followed by a compaction phase in order to avoid memory fragmentation. The compaction phase requires moving the objects to adjacent memory locations, thus making Mark-Sweep quite an expensive algorithm for large memory multiprocessor environments, unless a multithreaded heap compactor is employed.<br>Simple reference counting is also unsuitable for high throughput environments because it requires objects to be reclaimed on pointer updates; if a pointer is removed and the reference count of the pointed object drops to zero, the runtime system is required to collect both that object and the objects it references. Furthermore, a major drawback of reference counting is its inability to collect circular data structures, such as doubly linked lists. Despite its drawbacks, the simplicity in the implementation of reference counting made it the preferred garbage collection strategy in runtime environments with a limited lifetime, such as scripting languages.</p>
<h2 id="mutable-memory"><a href="#mutable-memory" class="headerlink" title="mutable memory"></a>mutable memory</h2><p>Memory in a typical JVM is organised in a series of mutable (garbage collected) and immutable zones. Class code is usually loaded in immutable space1 and remains there until the JVM is stopped. Also, the code emitted from the JIT compiler is temporarily stored in immutable space. The actual allocations take place in the heap, which is a contiguous memory area.</p>
<p>Apart from the class member values, each object also contains<br>additional data such as a pointer to the respective class methods and flags related to locking and<br>garbage collection. In most virtual machines, object headers take up to 8–12 bytes of additional<br>storage space for each object, and can therefore sadle a program with significant performance<br>and space overhead. A lot of work has been put into compacting the object header [6], which,<br>in some cases, resulted in space savings of up to 20%.</p>
<p>A failure to allocate space for an object triggers a garbage collection cycle. The root set<br>is determined by conservatively scanning the stacks of running or suspended threads and the<br>current values of the processor registers for potential pointers to the heap. Root set acquisition<br>can also be a performance bottleneck in the case when a large number of threads is executed<br>concurrently, though these costs can be amortised using clever co-operation of the garbage<br>collector with the JIT.</p>
<h2 id="JDK-1-5"><a href="#JDK-1-5" class="headerlink" title="JDK 1.5"></a>JDK 1.5</h2><p>Sun’s JVM is an implementation of the 1.5 version of the Java language specification. It features an adaptive optimising JIT compiler, the well-known Hotspot engine, and a choice of three garbage collectors [2, 12]. Sun’s JVM is based upon a generational copying garbage collector that utilises two generations  Figure 1 presents the heap organisation, which is shared among all collectors. Allocations initially occur in the eden space and survivors are promoted to one of the survivor spaces in a copying fashion. Optionally, portions of the heap space can be allocated to individual threads (Thread-Local Heaps (TLHs)), in order to speed up allocations on large-heap multithreaded environments. Objects that reach a certain age threshold, usually measured in minor garbage collection cycles, are copied to the tenured generation where they are left untouched until a major collection occurs. A mark-compact garbage collector is used for the tenured generation.</p>
<h1 id="Tuning-advise"><a href="#Tuning-advise" class="headerlink" title="Tuning advise"></a>Tuning advise</h1><ul>
<li>Unless you have specific hardware constraints, devote as much memory as you can to the virtual machine. A big heap size offers the opportunity for less frequent, albeit more time consuming, full heap collections. In a throughput-oriented environment sacrificing pause times to allow more CPU time for the executed application is often a good compromise. Do not allow the virtual machine to be swapped out to disk, as this is catastrophic for performance. In an application server that only runs a single virtual machine, you could devote about 90% of its available RAM to it and turn off paging, without risking the failure of either the virtual machine or the operating system.</li>
<li>Calculate the memory allocation rate for your application. It is a significant measurement that you should perform by exposing the application to full workload. Its impact varies depending on the underlying hardware. As a rule of thumb, on a multiprocessor machine, each processor could easily generate more than 150MB of garbage per second. High allocation rates can be efficiently dealt with by using parallel collectors or large eden heap sizes.</li>
</ul>
<h2 id="Committed-heap"><a href="#Committed-heap" class="headerlink" title="Committed heap"></a>Committed heap</h2><p>A MemoryUsage object represents a snapshot of memory usage. Instances of the MemoryUsage class are usually constructed by methods that are used to obtain memory usage information about individual memory pool of the Java virtual machine or the heap or non-heap memory of the Java virtual machine as a whole.<br>A MemoryUsage object contains four values:</p>
<p>init    represents the initial amount of memory (in bytes) that the Java virtual machine requests from the operating system for memory management during startup. The Java virtual machine may request additional memory from the operating system and may also release memory to the system over time. The value of init may be undefined.<br>used    represents the amount of memory currently used (in bytes).<br>committed    represents the amount of memory (in bytes) that is guaranteed to be available for use by the Java virtual machine. The amount of committed memory may change over time (increase or decrease). The Java virtual machine may release memory to the system and committed could be less than init. committed will always be greater than or equal to used.<br>max    represents the maximum amount of memory (in bytes) that can be used for memory management. Its value may be undefined. The maximum amount of memory may change over time if defined. The amount of used and committed memory will always be less than or equal to max if max is defined. A memory allocation may fail if it attempts to increase the used memory such that used &gt; committed even if used &lt;= max would still be true (for example, when the system is low on virtual memory).<br>Below is a picture showing an example of a memory pool:<br>        +———————————————-+<br>        +////////////////           |                  +<br>        +////////////////           |                  +<br>        +———————————————-+</p>
<pre><code>|--------|
   init
|---------------|
       used
|---------------------------|
          committed
|----------------------------------------------|</code></pre><h1 id="Garbage-Collection-for-JVM"><a href="#Garbage-Collection-for-JVM" class="headerlink" title="Garbage Collection for JVM"></a>Garbage Collection for JVM</h1><h2 id="Interpreting-vs-compile"><a href="#Interpreting-vs-compile" class="headerlink" title="Interpreting vs compile"></a>Interpreting vs compile</h2><ul>
<li>The HotSpot JVM (and other modern JVMs) uses a combination of bytecode interpretation and dynamic compilation. When a class is first loaded, the JVM executes it by interpreting the bytecode. At some point, if a method is run often enough, the dynamic compiler kicks in and converts it to machine code; when compilation completes, it switches from interpretation to direct execution.</li>
<li>Code may also be decompiled (reverting to interpreted execution) and recompiled for various reasons, such as loading a class that invalidates assumptions made by prior compilations, or gathering sufficient profiling data to decide that a code path should be recompiled with different optimizations.</li>
<li>One of the challenges of writing good benchmarks (in any language) is that optimizing compilers are adept at spotting and eliminating dead code—code that has no effect on the outcome. Since benchmarks often don’t compute anything, they are an easy target for the optimizer. Most of the time, it is a good thing when the optimizer prunes dead code from a program, but for a benchmark this is a big problem because then you are measuring less execution than you think.</li>
<li>Many microbenchmarks perform much “better” when run with HotSpot’s -server compiler than with -client, not just because the server compiler can produce more efficient code, but also because it is more adept at optimizing dead code.</li>
<li>Writing effective performance tests requires tricking the optimizer into not optimizing away your benchmark as dead code. This requires every computed result to be used somehow by your program—in a way that does not require synchronization or substantial computation.</li>
<li>We happen to need it to verify the correctness of the algorithm, but <strong>you can ensure that a value is used by printing it out</strong>. However, you should avoid doing I/O while the test is actually running, so as not to distort the run time measurement.</li>
<li>A cheap trick for preventing a calculation from being optimized away without introducing too much overhead is to compute the hashCode of the field of some derived object, compare it to an arbitrary value such as the current value of System. nanoTime, and print a useless and ignorable message if they happen to match:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(foo.x.hashCode()==System.nanoTime())</span><br><span class="line">	System.out.println(<span class="string">" "</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>The comparison will rarely succeed, and if it does, its only effect will be to insert a harmless space character into the output. (The print method buffers output until println is called, so in the rare case that hashCode and System.nanoTime are equal no I/O is actually performed.)</p>
<ul>
<li>Not only should every computed result be used, but <strong>results should also be unguessable</strong>. Otherwise, a smart dynamic optimizing compiler is allowed to replace actions with precomputed results. </li>
</ul>
<h1 id="Java-GC"><a href="#Java-GC" class="headerlink" title="Java GC"></a>Java GC</h1><p>Java’s GC considers objects “garbage” <strong>if they aren’t reachable through a chain starting at a garbage collection root</strong>, so these objects will be collected. Even though objects may point to each other to form a cycle, they’re <strong>still garbage if they’re cut off from the root</strong>.</p>
<p>See the section on unreachable objects in Appendix A: The Truth About Garbage Collection in Java Platform Performance: Strategies and Tactics (free ebook, also available on Safari) for the gory details.</p>
<h3 id="Java-Garbage-collector-handles-circular-reference"><a href="#Java-Garbage-collector-handles-circular-reference" class="headerlink" title="Java Garbage collector handles circular-reference!"></a>Java Garbage collector handles circular-reference!</h3><p>How?</p>
<p>There are special objects called called <strong>garbage-collection roots (GC roots)</strong>. These are always reachable and so is any object that has them at its own root.</p>
<p>A simple Java application has the following GC roots:</p>
<pre><code>Local variables in the main method
The main thread
Static variables of the main class</code></pre><p>To determine which objects are no longer in use, the JVM intermittently runs what is very aptly called a <strong>mark-and-sweep algorithm</strong>. It works as follows</p>
<pre><code>The algorithm traverses all object references, starting with the GC roots, and marks every object found as alive.
All of the heap memory that is not occupied by marked objects is reclaimed. It is simply marked as free, essentially swept free of unused objects.</code></pre><p>So if any object is not reachable from the GC roots(even if it is self-referenced or cyclic-referenced) it will be subjected to garbage collection.<br>Ofcourse sometimes this may led to memory leak if programmer forgets to dereference an object.</p>
<hr>
<p>The actual answer to this is implementation dependent. The Sun JVM keeps track of some set of root objects (threads and the like), and when it needs to do a garbage collection, traces out which objects are reachable from those and saves them, discarding the rest. It’s actually more complicated than that to allow for some optimizations, but that is the basic principle. This version does not care about circular references: as long as no live object holds a reference to a dead one, it can be GCed.</p>
<p>Other JVMs can use a method known as reference counting. When a reference is created to the object, some counter is incremented, and when the reference goes out of scope, the counter is decremented. If the counter reaches zero, the object is finalized and garbage collected. This version, however, does allow for the possibility of circular references that would never be garbage collected. As a safeguard, many such JVMs include a backup method to determine which objects actually are dead which it runs periodically to resolve self-references and defrag the heap.</p>
<hr>
<p>A garbage collector starts from some “root” set of places that are always considered “reachable”, such as the <strong>CPU registers, stack, and global variables</strong>. It works by finding any pointers in those areas, and <strong>recursively finding everything they point at</strong>. Once it’s found all that, everything else is garbage.</p>
<p>There are, of course, quite a few variations, mostly for the sake of speed. For example, most modern garbage collectors are “generational”, meaning that they divide objects into generations, and as an object gets older, the garbage collector goes longer and longer between times that it tries to figure out whether that object is still valid or not – it just starts to assume that if it has lived a long time, chances are pretty good that it’ll continue to live even longer.</p>
<p>Nonetheless, the basic idea remains the same: it’s all based on starting from some root set of things that it takes for granted could still be used, and then chasing all the pointers to find what else could be in use.</p>
<p>Interesting aside: may people are often surprised by the degree of similarity between this part of a garbage collector and code for marshaling objects for things like remote procedure calls. In each case, you’re starting from some root set of objects, and chasing pointers to find all the other objects those refer to…</p>
<hr>
<h3 id="How-Garbage-Collection-Really-Works"><a href="#How-Garbage-Collection-Really-Works" class="headerlink" title="How Garbage Collection Really Works"></a>How Garbage Collection Really Works</h3><p>Many people think garbage collection collects and discards <strong>dead</strong> objects. In reality, Java garbage collection is <strong>doing the opposite</strong>! <strong>Live</strong> objects are <strong>tracked</strong> and everything else designated garbage. As you’ll see, this fundamental misunderstanding can lead to many performance problems.</p>
<h4 id="Garbage-Collection-Roots—The-Source-of-All-Object-Trees"><a href="#Garbage-Collection-Roots—The-Source-of-All-Object-Trees" class="headerlink" title="Garbage-Collection Roots—The Source of All Object Trees"></a>Garbage-Collection Roots—The Source of All Object Trees</h4><p>Every object tree must have one or more root objects. As long as the application can reach those roots, the whole tree is reachable. But when are those root objects considered reachable? Special objects called <strong>garbage-collection roots (GC roots; see Figure 2.2) are always reachable</strong> and so is any object that has a garbage-collection root at its own root.</p>
<p>There are <strong>four</strong> kinds of GC roots in Java:</p>
<ol>
<li><strong>Local variables</strong> are kept alive by the stack of a thread. This is not a real object virtual reference and thus is not visible. For all intents and purposes, local variables are GC roots.</li>
<li><strong>Active Java threads</strong> are always considered live objects and are therefore GC roots. This is especially important for thread local variables.</li>
<li><strong>Static variables</strong> are referenced by their classes. This fact makes them de facto GC roots. Classes themselves can be garbage-collected, which would remove all referenced static variables. This is of special importance when we use application servers, OSGi containers or class loaders in general. We will discuss the related problems in the Problem Patterns section.</li>
<li><strong>JNI References</strong> are Java objects that the native code has created as part of a JNI call. Objects thus created are treated specially because the JVM does not know if it is being referenced by the native code or not. Such objects represent a very special form of GC root, which we will examine in more detail in the Problem Patterns section below.</li>
</ol>
<p>Therefore, a simple Java application has the following GC roots:</p>
<ul>
<li>Local variables in the main method</li>
<li>The main thread</li>
<li>Static variables of the main class</li>
</ul>
<h4 id="Marking-and-Sweeping-Away-Garbage"><a href="#Marking-and-Sweeping-Away-Garbage" class="headerlink" title="Marking and Sweeping Away Garbage"></a>Marking and Sweeping Away Garbage</h4><p>To determine which objects are no longer in use, the JVM intermittently runs what is very aptly called a <strong>mark-and-sweep algorithm</strong>. As you might intuit, it’s a straightforward, two-step process:</p>
<ol>
<li>The algorithm traverses all object references, <strong>starting with the GC roots</strong>, and <strong>marks every object found as alive</strong>.</li>
<li>All of the heap memory that is <strong>not occupied by marked objects is <em>reclaimed</em></strong>. It is simply marked as free, essentially swept free of unused objects.</li>
</ol>
<hr>
<p>Garbage collectors which rely solely on <strong>reference counting</strong> are generally <strong>vulnerable to failing to collection self-referential structures</strong> such as this. These GCs rely on a count of the number of references to the object in order to calculate whether a given object is reachable.</p>
<p>Non-reference counting approaches apply a more comprehensive reachability test to determine whether an object is eligible to be collected. These systems define an object (or set of objects) which are always assumed to be reachable. Any object for which references are available from this object graph is considered ineligible for collection. Any object not directly accessible from this object is not. Thus, cycles do not end up affecting reachability, and can be collected.</p>
<hr>
<h3 id="Tracing-collector-vs-countering-collector"><a href="#Tracing-collector-vs-countering-collector" class="headerlink" title="Tracing collector vs. countering collector"></a>Tracing collector vs. countering collector</h3><p>There are two primary types of garbage collectors, although often a hybrid approach is found between these to suit particular needs. The first type, the one which might be the most intuitive, is a reference counting collector. The second one, which is most similar to what we described above, is a tracing collector.</p>
<h4 id="Reference-Counting-Collector"><a href="#Reference-Counting-Collector" class="headerlink" title="Reference Counting Collector"></a>Reference Counting Collector</h4><p>When a new memory object is allocated by the GC, it is given an integer count field. Every time a pointer is made to that object, a reference, the count is increased. So long as the count is a positive non-zero integer, the object is actively being referenced and is still alive.<br>When a reference to the object is removed, the count is decremented. When the count reaches zero, the object is dead and can be immediately reclaimed.<br>There are a number of points to remember about Reference Counting collectors:</p>
<ol>
<li><strong>Circular references will never be reclaimed</strong>, even if the entire set of objects is dead.</li>
<li><strong>Reference counting is pervasive</strong>: The entire program must be made aware of the system, and every pointer reference or dereference must be accompanied by an appropriate increment or decrement. Failing to maintain the count, even once in a large program, will create memory problems for your program.</li>
<li>Reference counting can be <strong>costly</strong>, because counts must be manipulated for every pointer operation, and the count must be tested against zero on ever decrement. These operations can, if used often enough, create a performance penalty for your program.</li>
</ol>
<p>These types of collectors are often called <strong>cooperative collectors</strong> because they require cooperation from the rest of the system to maintain the counts.</p>
<h4 id="Tracing-Collector"><a href="#Tracing-Collector" class="headerlink" title="Tracing Collector"></a>Tracing Collector</h4><p>Tracing collectors are entirely dissimilar from reference counting collectors, and have opposite strengths and weaknesses.<br>When the Tracing GC allocates a new memory chunk, the GC does not create a counter, but it does create a flag to determine when the item has been marked, and a pointer to the object that the GC keeps. The flags are not manipulated by the program itself, but are only manipulated by the GC when it performs a run.</p>
<p>During a GC run, the program execution typically halts. This can cause intermittent pauses in the program, pauses which can be quite long if there are many memory objects to trace.</p>
<p>The GC selects a set of root objects which are available to the current program scope and parent scopes. Starting from these objects, the GC identifies all pointers within the objects, called children. The object itself is marked as being alive, and then the collector moves to each child and marks it in the same way. The memory objects form a sort of tree structure, and the GC traverses this tree using recursive or stack-based methods.</p>
<p>At the end of the GC run, when there are no more children to be marked, all unmarked objects are considered unreachable and therefore dead. All dead objects are collected.</p>
<p>A few points to remember about Tracing GCs:</p>
<ol>
<li>Tracing GCs can be used <strong>to find cycles</strong>, memory objects whose pointers form circular structures. Reference Counting schemes cannot do this.</li>
<li>Tracing GCs <strong>cause pauses</strong> in the program, and these pauses can become unbearably long in some complex programs that use many small memory objects.</li>
<li><strong>Dead objects are not reclaimed immediately</strong>. Reclamation only occurs after a GC run. This causes a certain inefficiency in memory usage.</li>
<li>Tracing collectors do not require the program to account explicitly for memory counts or memory status updates. All memory tracking logic is stored inside the GC itself. This makes it easier to write extensions for these systems, and also makes it easier to install a Tracing GC in an existing system then to install a Reference Counting one.</li>
</ol>
<p>Tracing GCs are often called <strong>uncooperative</strong> collectors because they do not require cooperation from the rest of the system to function properly.<br>Hybrid Collectors</p>
<p>Sometimes, reference counting schemes will utilize Tracing systems to find cyclical garbage. Tracing systems may employ reference counts on very large objects to ensure they are reclaimed quickly. These are just two examples of hybridized garbage collectors that are more common then either of the two “pure” types described above.</p>
<p>In later chapters, we will discuss garbage collectors and their algorithms in more detail.</p>
<h1 id="Java-runtime-data-area"><a href="#Java-runtime-data-area" class="headerlink" title="Java runtime data area"></a>Java runtime data area</h1><p>There are 5 areas</p>
<ol>
<li>Heap</li>
<li>Java Stack</li>
<li>Method Area</li>
<li>Native method area</li>
<li>PC/Register</li>
</ol>
<h1 id="Java-GC-1"><a href="#Java-GC-1" class="headerlink" title="Java GC"></a>Java GC</h1><p>Java’s GC considers objects “garbage” <strong>if they aren’t reachable through a chain starting at a garbage collection root</strong>, so these objects will be collected. Even though objects may point to each other to form a cycle, they’re <strong>still garbage if they’re cut off from the root</strong>.</p>
<p>See the section on unreachable objects in Appendix A: The Truth About Garbage Collection in Java Platform Performance: Strategies and Tactics (free ebook, also available on Safari) for the gory details.</p>
<h3 id="Java-Garbage-collector-handles-circular-reference-1"><a href="#Java-Garbage-collector-handles-circular-reference-1" class="headerlink" title="Java Garbage collector handles circular-reference!"></a>Java Garbage collector handles circular-reference!</h3><p>How?</p>
<p>There are special objects called called <strong>garbage-collection roots (GC roots)</strong>. These are always reachable and so is any object that has them at its own root.</p>
<p>A simple Java application has the following GC roots:</p>
<pre><code>Local variables in the main method
The main thread
Static variables of the main class</code></pre><p>To determine which objects are no longer in use, the JVM intermittently runs what is very aptly called a <strong>mark-and-sweep algorithm</strong>. It works as follows</p>
<pre><code>The algorithm traverses all object references, starting with the GC roots, and marks every object found as alive.
All of the heap memory that is not occupied by marked objects is reclaimed. It is simply marked as free, essentially swept free of unused objects.</code></pre><p>So if any object is not reachable from the GC roots(even if it is self-referenced or cyclic-referenced) it will be subjected to garbage collection.<br>Ofcourse sometimes this may led to memory leak if programmer forgets to dereference an object.</p>
<hr>
<p>The actual answer to this is implementation dependent. The Sun JVM keeps track of some set of root objects (threads and the like), and when it needs to do a garbage collection, traces out which objects are reachable from those and saves them, discarding the rest. It’s actually more complicated than that to allow for some optimizations, but that is the basic principle. This version does not care about circular references: as long as no live object holds a reference to a dead one, it can be GCed.</p>
<p>Other JVMs can use a method known as reference counting. When a reference is created to the object, some counter is incremented, and when the reference goes out of scope, the counter is decremented. If the counter reaches zero, the object is finalized and garbage collected. This version, however, does allow for the possibility of circular references that would never be garbage collected. As a safeguard, many such JVMs include a backup method to determine which objects actually are dead which it runs periodically to resolve self-references and defrag the heap.</p>
<hr>
<p>A garbage collector starts from some “root” set of places that are always considered “reachable”, such as the <strong>CPU registers, stack, and global variables</strong>. It works by finding any pointers in those areas, and <strong>recursively finding everything they point at</strong>. Once it’s found all that, everything else is garbage.</p>
<p>There are, of course, quite a few variations, mostly for the sake of speed. For example, most modern garbage collectors are “generational”, meaning that they divide objects into generations, and as an object gets older, the garbage collector goes longer and longer between times that it tries to figure out whether that object is still valid or not – it just starts to assume that if it has lived a long time, chances are pretty good that it’ll continue to live even longer.</p>
<p>Nonetheless, the basic idea remains the same: it’s all based on starting from some root set of things that it takes for granted could still be used, and then chasing all the pointers to find what else could be in use.</p>
<p>Interesting aside: may people are often surprised by the degree of similarity between this part of a garbage collector and code for marshaling objects for things like remote procedure calls. In each case, you’re starting from some root set of objects, and chasing pointers to find all the other objects those refer to…</p>
<hr>
<h3 id="How-Garbage-Collection-Really-Works-1"><a href="#How-Garbage-Collection-Really-Works-1" class="headerlink" title="How Garbage Collection Really Works"></a>How Garbage Collection Really Works</h3><p>Many people think garbage collection collects and discards <strong>dead</strong> objects. In reality, Java garbage collection is <strong>doing the opposite</strong>! <strong>Live</strong> objects are <strong>tracked</strong> and everything else designated garbage. As you’ll see, this fundamental misunderstanding can lead to many performance problems.</p>
<h4 id="Garbage-Collection-Roots—The-Source-of-All-Object-Trees-1"><a href="#Garbage-Collection-Roots—The-Source-of-All-Object-Trees-1" class="headerlink" title="Garbage-Collection Roots—The Source of All Object Trees"></a>Garbage-Collection Roots—The Source of All Object Trees</h4><p>Every object tree must have one or more root objects. As long as the application can reach those roots, the whole tree is reachable. But when are those root objects considered reachable? Special objects called <strong>garbage-collection roots (GC roots; see Figure 2.2) are always reachable</strong> and so is any object that has a garbage-collection root at its own root.</p>
<p>There are <strong>four</strong> kinds of GC roots in Java:</p>
<ol>
<li><strong>Local variables</strong> are kept alive by the stack of a thread. This is not a real object virtual reference and thus is not visible. For all intents and purposes, local variables are GC roots.</li>
<li><strong>Active Java threads</strong> are always considered live objects and are therefore GC roots. This is especially important for thread local variables.</li>
<li><strong>Static variables</strong> are referenced by their classes. This fact makes them de facto GC roots. Classes themselves can be garbage-collected, which would remove all referenced static variables. This is of special importance when we use application servers, OSGi containers or class loaders in general. We will discuss the related problems in the Problem Patterns section.</li>
<li><strong>JNI References</strong> are Java objects that the native code has created as part of a JNI call. Objects thus created are treated specially because the JVM does not know if it is being referenced by the native code or not. Such objects represent a very special form of GC root, which we will examine in more detail in the Problem Patterns section below.</li>
</ol>
<p>Therefore, a simple Java application has the following GC roots:</p>
<ul>
<li>Local variables in the main method</li>
<li>The main thread</li>
<li>Static variables of the main class</li>
</ul>
<h4 id="Marking-and-Sweeping-Away-Garbage-1"><a href="#Marking-and-Sweeping-Away-Garbage-1" class="headerlink" title="Marking and Sweeping Away Garbage"></a>Marking and Sweeping Away Garbage</h4><p>To determine which objects are no longer in use, the JVM intermittently runs what is very aptly called a <strong>mark-and-sweep algorithm</strong>. As you might intuit, it’s a straightforward, two-step process:</p>
<ol>
<li>The algorithm traverses all object references, <strong>starting with the GC roots</strong>, and <strong>marks every object found as alive</strong>.</li>
<li>All of the heap memory that is <strong>not occupied by marked objects is <em>reclaimed</em></strong>. It is simply marked as free, essentially swept free of unused objects.</li>
</ol>
<hr>
<p>Garbage collectors which rely solely on <strong>reference counting</strong> are generally <strong>vulnerable to failing to collection self-referential structures</strong> such as this. These GCs rely on a count of the number of references to the object in order to calculate whether a given object is reachable.</p>
<p>Non-reference counting approaches apply a more comprehensive reachability test to determine whether an object is eligible to be collected. These systems define an object (or set of objects) which are always assumed to be reachable. Any object for which references are available from this object graph is considered ineligible for collection. Any object not directly accessible from this object is not. Thus, cycles do not end up affecting reachability, and can be collected.</p>
<hr>
<h3 id="Tracing-collector-vs-countering-collector-1"><a href="#Tracing-collector-vs-countering-collector-1" class="headerlink" title="Tracing collector vs. countering collector"></a>Tracing collector vs. countering collector</h3><p>There are two primary types of garbage collectors, although often a hybrid approach is found between these to suit particular needs. The first type, the one which might be the most intuitive, is a reference counting collector. The second one, which is most similar to what we described above, is a tracing collector.</p>
<h4 id="Reference-Counting-Collector-1"><a href="#Reference-Counting-Collector-1" class="headerlink" title="Reference Counting Collector"></a>Reference Counting Collector</h4><p>When a new memory object is allocated by the GC, it is given an integer count field. Every time a pointer is made to that object, a reference, the count is increased. So long as the count is a positive non-zero integer, the object is actively being referenced and is still alive.<br>When a reference to the object is removed, the count is decremented. When the count reaches zero, the object is dead and can be immediately reclaimed.<br>There are a number of points to remember about Reference Counting collectors:</p>
<ol>
<li><strong>Circular references will never be reclaimed</strong>, even if the entire set of objects is dead.</li>
<li><strong>Reference counting is pervasive</strong>: The entire program must be made aware of the system, and every pointer reference or dereference must be accompanied by an appropriate increment or decrement. Failing to maintain the count, even once in a large program, will create memory problems for your program.</li>
<li>Reference counting can be <strong>costly</strong>, because counts must be manipulated for every pointer operation, and the count must be tested against zero on ever decrement. These operations can, if used often enough, create a performance penalty for your program.</li>
</ol>
<p>These types of collectors are often called <strong>cooperative collectors</strong> because they require cooperation from the rest of the system to maintain the counts.</p>
<h4 id="Tracing-Collector-1"><a href="#Tracing-Collector-1" class="headerlink" title="Tracing Collector"></a>Tracing Collector</h4><p>Tracing collectors are entirely dissimilar from reference counting collectors, and have opposite strengths and weaknesses.<br>When the Tracing GC allocates a new memory chunk, the GC does not create a counter, but it does create a flag to determine when the item has been marked, and a pointer to the object that the GC keeps. The flags are not manipulated by the program itself, but are only manipulated by the GC when it performs a run.</p>
<p>During a GC run, the program execution typically halts. This can cause intermittent pauses in the program, pauses which can be quite long if there are many memory objects to trace.</p>
<p>The GC selects a set of root objects which are available to the current program scope and parent scopes. Starting from these objects, the GC identifies all pointers within the objects, called children. The object itself is marked as being alive, and then the collector moves to each child and marks it in the same way. The memory objects form a sort of tree structure, and the GC traverses this tree using recursive or stack-based methods.</p>
<p>At the end of the GC run, when there are no more children to be marked, all unmarked objects are considered unreachable and therefore dead. All dead objects are collected.</p>
<p>A few points to remember about Tracing GCs:</p>
<ol>
<li>Tracing GCs can be used <strong>to find cycles</strong>, memory objects whose pointers form circular structures. Reference Counting schemes cannot do this.</li>
<li>Tracing GCs <strong>cause pauses</strong> in the program, and these pauses can become unbearably long in some complex programs that use many small memory objects.</li>
<li><strong>Dead objects are not reclaimed immediately</strong>. Reclamation only occurs after a GC run. This causes a certain inefficiency in memory usage.</li>
<li>Tracing collectors do not require the program to account explicitly for memory counts or memory status updates. All memory tracking logic is stored inside the GC itself. This makes it easier to write extensions for these systems, and also makes it easier to install a Tracing GC in an existing system then to install a Reference Counting one.</li>
</ol>
<p>Tracing GCs are often called <strong>uncooperative</strong> collectors because they do not require cooperation from the rest of the system to function properly.<br>Hybrid Collectors</p>
<p>Sometimes, reference counting schemes will utilize Tracing systems to find cyclical garbage. Tracing systems may employ reference counts on very large objects to ensure they are reclaimed quickly. These are just two examples of hybridized garbage collectors that are more common then either of the two “pure” types described above.</p>
<p>In later chapters, we will discuss garbage collectors and their algorithms in more detail.</p>
<h1 id="to-be-callibrated"><a href="#to-be-callibrated" class="headerlink" title="to be callibrated"></a>to be callibrated</h1><p>G1 is a concurrent collector that operates on discrete regions within the heap. Each region (there are by default around 2,048 of them) can belong to either the old or new generation, and the generational regions need not be contiguous. The idea behind having regions in the old generation is that when the concurrent background threads look for unreferenced objects, some regions will contain more garbage than other regions. The actual collection of a region still requires that application threads be stopped, but G1 can focus on the regions that are mostly garbage and only spend a little bit of time emptying those regions. This approach—clearing out only the mostly garbage regions—is what gives G1 its name: Garbage First.<br>That doesn’t apply to the regions in the young generation: during a young GC, the entire young generation is either freed or promoted (to a survivor space or to the old generation). Still, the young generation is defined in terms of regions, in part because it makes resizing the generations much easier if the regions are predefined.<br>G1 has four main operations:<br>A young collection<br>A background, concurrent cycle<br>A mixed collection<br>If necessary, a full GC<br>We’ll look at each of those in turn, starting with the G1 young collection shown in Figure 6-6.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.ibm.com/developerworks/java/library/j-jtp10283/" target="_blank" rel="noopener">http://www.ibm.com/developerworks/java/library/j-jtp10283/</a></li>
<li><a href="https://blogs.oracle.com/jonthecollector/entry/our_collectors" target="_blank" rel="noopener">https://blogs.oracle.com/jonthecollector/entry/our_collectors</a></li>
<li><a href="https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Tracing_garbage_collectors" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Tracing_garbage_collectors</a></li>
<li><a href="http://users.cecs.anu.edu.au/~steveb/pubs/papers/urc-oopsla-2003.pdf" target="_blank" rel="noopener">http://users.cecs.anu.edu.au/~steveb/pubs/papers/urc-oopsla-2003.pdf</a></li>
<li><a href="https://www.dynatrace.com/resources/ebooks/javabook/" target="_blank" rel="noopener">https://www.dynatrace.com/resources/ebooks/javabook/</a></li>
<li><a href="https://en.wikipedia.org/wiki/Tracing_garbage_collection" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Tracing_garbage_collection</a></li>
<li><a href="https://en.wikibooks.org/wiki/Memory_Management/Garbage_Collection" target="_blank" rel="noopener">https://en.wikibooks.org/wiki/Memory_Management/Garbage_Collection</a></li>
<li><a href="http://flyingfrogblog.blogspot.com/2013/09/how-do-reference-counting-and-tracing.html" target="_blank" rel="noopener">http://flyingfrogblog.blogspot.com/2013/09/how-do-reference-counting-and-tracing.html</a></li>
<li><a href="https://www.dynatrace.com/resources/ebooks/javabook/how-garbage-collection-works/" target="_blank" rel="noopener">https://www.dynatrace.com/resources/ebooks/javabook/how-garbage-collection-works/</a></li>
<li><a href="http://stackoverflow.com/questions/1910194/how-does-java-garbage-collection-work-with-circular-references" target="_blank" rel="noopener">http://stackoverflow.com/questions/1910194/how-does-java-garbage-collection-work-with-circular-references</a></li>
<li><a href="http://www.java-books.us/j2ee_0003.php" target="_blank" rel="noopener">http://www.java-books.us/j2ee_0003.php</a></li>
<li><a href="http://www.ibm.com/developerworks/java/library/j-jtp10283/" target="_blank" rel="noopener">http://www.ibm.com/developerworks/java/library/j-jtp10283/</a></li>
<li><a href="https://blogs.oracle.com/jonthecollector/entry/our_collectors" target="_blank" rel="noopener">https://blogs.oracle.com/jonthecollector/entry/our_collectors</a></li>
<li><a href="https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Tracing_garbage_collectors" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Tracing_garbage_collectors</a></li>
<li><a href="http://users.cecs.anu.edu.au/~steveb/pubs/papers/urc-oopsla-2003.pdf" target="_blank" rel="noopener">http://users.cecs.anu.edu.au/~steveb/pubs/papers/urc-oopsla-2003.pdf</a></li>
<li><a href="https://www.dynatrace.com/resources/ebooks/javabook/" target="_blank" rel="noopener">https://www.dynatrace.com/resources/ebooks/javabook/</a></li>
<li><a href="https://en.wikipedia.org/wiki/Tracing_garbage_collection" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Tracing_garbage_collection</a></li>
<li><a href="https://en.wikibooks.org/wiki/Memory_Management/Garbage_Collection" target="_blank" rel="noopener">https://en.wikibooks.org/wiki/Memory_Management/Garbage_Collection</a></li>
<li><a href="http://flyingfrogblog.blogspot.com/2013/09/how-do-reference-counting-and-tracing.html" target="_blank" rel="noopener">http://flyingfrogblog.blogspot.com/2013/09/how-do-reference-counting-and-tracing.html</a></li>
<li><a href="https://www.dynatrace.com/resources/ebooks/javabook/how-garbage-collection-works/" target="_blank" rel="noopener">https://www.dynatrace.com/resources/ebooks/javabook/how-garbage-collection-works/</a></li>
<li><a href="http://stackoverflow.com/questions/1910194/how-does-java-garbage-collection-work-with-circular-references" target="_blank" rel="noopener">http://stackoverflow.com/questions/1910194/how-does-java-garbage-collection-work-with-circular-references</a></li>
<li><a href="http://www.java-books.us/j2ee_0003.php" target="_blank" rel="noopener">http://www.java-books.us/j2ee_0003.php</a></li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2016-12-30-HashCode-Contract/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2016-12-30-HashCode-Contract/" class="post-title-link" itemprop="url">Hash Code Misc</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="contract-of-hashCode"><a href="#contract-of-hashCode" class="headerlink" title="contract of hashCode :"></a>contract of hashCode :</h1><ul>
<li>Whenever it is <strong>invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer</strong>, provided no information used in equals comparisons on the object is modified. This <em>integer need <strong>not</strong> remain consistent from one execution of an application to another execution of the <strong>same</strong> application</em>.</li>
<li>If two objects <strong>are equal</strong> according to the equals(Object) method, then calling the hashCode method on each of the two objects must produce the <strong>same integer</strong> result.</li>
<li>It is <strong>not required</strong> that <strong>if two objects are unequal</strong> according to the equals(java.lang.Object) method, then calling the hashCode method on each of the two objects <strong>must produce distinct integer results</strong>. However, the programmer should be aware that producing distinct integer results for unequal objects <em>may improve the performance of hash tables</em>.</li>
</ul>
<p>As much as is reasonably practical, the hashCode method defined by class Object does return distinct integers for distinct objects. (This is typically implemented by <strong>converting the internal address</strong> of the object into an integer, but this implementation technique is not required by the JavaTM programming language.)</p>
<h1 id="Hashcode-in-Java-Collections"><a href="#Hashcode-in-Java-Collections" class="headerlink" title="Hashcode in Java Collections"></a>Hashcode in Java Collections</h1><h2 id="Hashcode-vs-equals"><a href="#Hashcode-vs-equals" class="headerlink" title="Hashcode vs. equals"></a>Hashcode vs. equals</h2><h3 id="Equals"><a href="#Equals" class="headerlink" title="Equals"></a>Equals</h3><p>For usage in java collections framework, <strong>equals()</strong> used in following scenarios:</p>
<ul>
<li>contains or not</li>
<li>to remove one item</li>
</ul>
<p>Below is one implementation of a Equals</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(o==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(!(o <span class="keyword">instanceof</span> Employee)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        Employee other=(Employee)o;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.employeeID==other.employeeID;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Hashcode"><a href="#Hashcode" class="headerlink" title="Hashcode"></a>Hashcode</h3><p>When insert data into HashTable, HashMap, HashSet, the hashcode used to determine <strong>where</strong> to <strong>store/search</strong> the value in list/bucket. The hashcode only <strong>point to an area</strong> in list/bucket of data. The hashtable then iterates this area (all keys with the same hash code) and uses the key’s equals() method to find the right key. Once the right key is found, the object stored for that key is returned. </p>
<p>After you override the hashcode, you are still be able to get origional hashcode via calling <strong>int originalHashCode = System.identityHashCode(emp1);</strong></p>
<h3 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h3><p>In this regard there is a rule of thumb that if you are going to overide the one of the methods (equals, hashcode), you have to override both, othersise it’s a violation of contract .</p>
<h2 id="HashMap-tips"><a href="#HashMap-tips" class="headerlink" title="HashMap tips"></a>HashMap tips</h2><ul>
<li>Since searching inlined list is O(n) operation, in worst case hash collision reduce a map to linked list. This issue is recently addressed in Java 8 by replacing linked list to the tree to search in O(logN)</li>
<li><strong>HashMap works on the principle of hashing</strong>.</li>
<li>HashMap  stores both Key and Value in LinkedList node or as Map</li>
<li>using immutable, final object with proper equals() and hashcode() implementation would act as perfect Java HashMap  keys and improve the performance of Java HashMap  by reducing collision. <strong>Immutability also allows caching their hashcode of different keys which makes overall retrieval process very fast</strong> and suggest that String and various wrapper classes e.g. Integer very good keys in Java HashMap.</li>
<li>if the load factor is .75 it will act to re-size the map once it filled 75%. Java HashMap re-size itself by creating a new bucket array of size twice of the previous size of HashMap and then start putting every old element into that new bucket array. This process is called rehashing because it also applies the hash function to find new bucket location. </li>
<li>there is potential race condition exists while resizing HashMap in Java, if two thread at the same time found that now HashMap needs resizing and they both try to resizing. on the process of resizing of HashMap in Java, the element in the bucket which is stored in linked list get reversed in order during their migration to new bucket because Java HashMap  doesn’t append the new element at tail instead it append new element at the head to avoid tail traversing.</li>
<li>If race condition happens then you will end up with an infinite loop. </li>
</ul>
<h2 id="Why-String-Integer-and-other-wrapper-classes-are-considered-good-keys"><a href="#Why-String-Integer-and-other-wrapper-classes-are-considered-good-keys" class="headerlink" title="Why String, Integer and other wrapper classes are considered good keys?"></a>Why String, Integer and other wrapper classes are considered good keys?</h2><ul>
<li>String, Integer and other wrapper classes are natural candidates of HashMap key, and String is most frequently used key as well because String is immutable and final, and overrides equals and hashcode() method. </li>
<li>Immutability is best as it offers other advantages as well like thread-safety, If you can  keep your hashCode same by only making certain fields final, then you go for that as well.</li>
</ul>
<h1 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a>ConcurrentHashMap</h1><ul>
<li>ConcurrentHashMap provides better concurrency by only locking portion of map determined by concurrency level. </li>
<li>but Hashtable provides stronger thread-safety than ConcurrentHashMap</li>
<li>ConcurrentHashMap performs better than earlier two because it only locks a portion of Map, instead of whole Map, which is the case with Hashtable and synchronized Map. </li>
<li>provided all functions supported by Hashtable with an additional feature called “concurrency level”, which allows ConcurrentHashMap to partition Map.</li>
<li>ConcurrentHashMap allows multiple readers to read concurrently without any blocking. This is achieved by partitioning Map into different parts based on concurrency level and locking only a portion of Map during updates. </li>
<li><strong>Default concurrency level is 16</strong>, and accordingly Map is divided into 16 part and each part is governed with a different lock. This means, 16 thread can operate on Map simultaneously until they are operating on different part of Map. </li>
<li>Since update operations like put(), remove(), putAll() or clear() is not synchronized, concurrent retrieval may not reflect most recent change on Map.</li>
<li>ConcurrentHashMap also uses ReentrantLock to internally lock its segments.</li>
<li>In hashmap and hashtable, you can check one item first and add it if not present. Though this code will work fine in HashMap and Hashtable, This won’t work in ConcurrentHashMap; because, during put operation whole map is not locked, and while one thread is putting value, other thread’s get() call can still return null which result in one thread overriding value inserted by other thread. Ofcourse, you can wrap whole code in synchronized block and make it thread-safe but that will only make your code single threaded. ConcurrentHashMap provides putIfAbsent(key, value) which does same thing but atomically and thus eliminates above race condition</li>
<li>ConcurrentHashMap is best suited when you have <strong>multiple readers</strong> and <strong>few writers</strong>. If writers outnumber reader, or writer is equal to reader, than performance of ConcurrentHashMap <strong>effectively reduces to synchronized map or Hashtable</strong>. Performance of CHM drops, because you got to <strong>lock all portion of Map</strong>, and effectively each reader will wait for another writer, operating on that portion of Map. ConcurrentHashMap is a good choice for caches, which can be initialized during application start up and later accessed my many request processing threads.</li>
<li>ConcurrentHashMap allows <strong>concurrent read</strong> and <strong>thread-safe update</strong> operation.</li>
<li>Iterator returned by ConcurrentHashMap is weekly consistent, fail-safe and never throw ConcurrentModificationException. </li>
<li>In Java.ConcurrentHashMap <strong>doesn’t allow null as key or value</strong>.</li>
</ul>
<h1 id="How-null-work-in-HashMap"><a href="#How-null-work-in-HashMap" class="headerlink" title="How null work in HashMap"></a>How null work in HashMap</h1><p> How null key is handled in HashMap? Since equals() and hashCode() are used to store and retrieve values, how does it work in case of the null key?</p>
<p>The null key is handled specially in HashMap, there are two separate methods for that putForNullKey(V value)<br>and getForNullKey()<br>. Later is offloaded version of get() to look up null keys.  Null keys always map to index 0.  This null case is split out into separate methods for the sake of performance in the two most commonly used operations (get and put), but incorporated with conditionals in others. In short, equals()<br>and hashcode() method are not used in case of null keys in HashMap.</p>
<h1 id="Performance-changes-in-JDK-1-7-and-1-8"><a href="#Performance-changes-in-JDK-1-7-and-1-8" class="headerlink" title="Performance changes in JDK 1.7 and 1.8"></a>Performance changes in JDK 1.7 and 1.8</h1><ul>
<li>There is some performance improvement done on HashMap and ArrayList from JDK 1.7, which reduce memory consumption. Due to this empty Map are lazily initialized and will cost you less memory. Earlier, when you create HashMap e.g. new HashMap() it automatically creates an array of default length e.g. 16. After some research, Java team found that most of this Map are temporary and never use that many elements, and only end up wasting memory. Also, From JDK 1.8 onwards HashMap has introduced an improved strategy to deal with high collision rate. Since a poor hash function e.g. which always return location of same bucket, can turn a HashMap into linked list, i.e. converting get() method to perform <strong>in O(n) instead of O(1)</strong> and someone can take advantage of this fact, Java now internally replace linked list to a binary true once certain threshold is breached. This ensures performance or order O(log(n)) even in the worst case where a hash function is not distributing keys properly.</li>
<li>such change is creating empty ArrayList and HashMap with size zero in JDK 1.7.0_40 update.</li>
<li>If you are running on Java 1.6 or earlier version of Java 1.7, you can open code of java.util.ArrayList and check that, currently empty ArrayList is initialized with Object array of <strong>size 10</strong>. If you create several temporary list in your program, which remains uninitialized, due to any reason then you are not only losing memory but also losing performance by giving your garbage collector more work.</li>
<li>Same is true for empty HashMap, which was initialized by <strong>default initial capacity of 16</strong>. This changes are result of observation made by Nathan Reynolds, and Architect at Oracle, which apparently analysed 670 Java heap dumps from different Java programs to find out memory hogs.</li>
<li>By the way, it’s not just memory, it’s also extra work-load for Garbage collector</li>
</ul>
<h1 id="Hashtable"><a href="#Hashtable" class="headerlink" title="Hashtable"></a>Hashtable</h1><ul>
<li>One of the major differences between HashMap and Hashtable is that HashMap is non-synchronized whereas Hashtable is synchronized</li>
<li>Another difference is HashMap allows <strong>one</strong> null key and null values but *<em>Hashtable doesn’t allow null *</em> key or values.</li>
<li>Another significant difference between HashMap vs Hashtable is that Iterator in the <strong>HashMap is  a fail-fast ** iterator  while the enumerator for the **Hashtable is not and throw ConcurrentModificationException</strong> if any other Thread modifies the map structurally  by adding or removing any element except Iterator’s own remove() method</li>
</ul>
<h1 id="ConcurrentHashMap-vs-Hashtable-vs-Synchronized-Map"><a href="#ConcurrentHashMap-vs-Hashtable-vs-Synchronized-Map" class="headerlink" title="ConcurrentHashMap vs Hashtable vs Synchronized Map"></a>ConcurrentHashMap vs Hashtable vs Synchronized Map</h1><ul>
<li>Though all three collection classes are thread-safe and can be used in multi-threaded, concurrent Java application, there is a significant difference between them, which arise from the fact that <strong>how they achieve their thread-safety</strong>. </li>
<li>Hashtable is a legacy class from JDK 1.1 itself, which uses <strong>synchronized methods</strong> to achieve thread-safety. All methods of Hashtable are synchronized which makes them quite slow due to contention if a number of thread increases. </li>
<li>Synchronized Map is also <strong>not very different than Hashtable</strong> and provides similar performance in concurrent Java programs. The only difference between Hashtable and Synchronized Map is that later is not a legacy and you <strong>can wrap any Map</strong> to create it’s synchronized version by using Collections.synchronizedMap()</li>
<li>Unlike Hashtable and Synchronized Map, it <strong>never locks whole Map</strong>, instead, it divides the map into segments and locking is done on those. Though it performs better if a number of <strong>reader threads are greater than</strong> the number of writer threads.</li>
<li><strong>ConcurrentHashMap and CopyOnWriteArrayList</strong> implementations provide much <strong>higher concurrency while preserving thread safety</strong>, with some minor compromises in their promises to callers. ConcurrentHashMap and CopyOnWriteArrayList are not necessarily useful everywhere you might use HashMap or ArrayList, but are designed to optimize specific common situations. </li>
<li><strong>ConcurrentHashMap does not allow null</strong> keys or null values while <strong>synchronized HashMap allows one null key</strong>.</li>
</ul>
<h1 id="Synchronized-List"><a href="#Synchronized-List" class="headerlink" title="Synchronized List"></a>Synchronized List</h1><ul>
<li><p>CopyOnWriteArrayList and CopyOnWriteArraySet<br>CopyOnWriteArrayList is a concurrent alternative of synchronized List. CopyOnWriteArrayList provides better concurrency than synchronized List by allowing <strong>multiple concurrent reader</strong> and <strong>replacing the whole list on write</strong> operation. Yes, write operation is costly on CopyOnWriteArrayList but it <strong>performs better when there are multiple reader</strong> and requirement of <strong>iteration is more than writing</strong>. Since CopyOnWriteArrayList Iterator also don’t throw ConcurrencModificationException <strong>it eliminates need to lock the collection during iteration</strong>. Remember both ConcurrentHashMap and CopyOnWriteArrayList doesn’t provides same level of locking as Synchronized Collection and achieves thread-safety by there locking and mutability strategy. So they perform better if requirements suits there nature. Similarly, CopyOnWriteArraySet is a concurrent replacement to Synchronized Set. See What is CopyOnWriteArrayList in Java for more details</p>
</li>
<li><p>BlockingQueue<br>BlockingQueue is also one of better known collection class in Java 5. BlockingQueue makes it easy <strong>to implement producer-consumer design pattern</strong> by providing inbuilt <strong>blocking support for put() and take() method</strong>. put() method will block if Queue is full while take() method will block if Queue is empty. Java 5 API provides two concrete implementation of BlockingQueue in form of <strong>ArrayBlockingQueue and LinkedBlockingQueue</strong>, both of them implement <strong>FIFO ordering</strong> of element. ArrayBlockingQueue <strong>is backed by Array</strong> and its <strong>bounded</strong> in nature while <strong>LinkedBlockingQueue is optionally bounded</strong>. Consider <strong>using BlockingQueue to solve producer Consumer problem</strong> in Java instead of writing your won wait-notify code. Java 5 also provides <strong>PriorityBlockingQueue</strong>, another implementation of BlockingQueue which is ordered on priority and useful if you want to process elements on order other than FIFO.</p>
</li>
<li><p>Deque interface<br>is added in Java 6 and it extends Queue interface to support <strong>insertion and removal from both end of Queue</strong> referred as <strong>head and tail</strong>. Java6 also provides concurrent implementation of Deque like <strong>ArrayDeque and LinkedBlockingDeque</strong>. Deque Can be used efficiently <strong>to increase parallelism in program by allowing set of worker thread *<em>to help each other by taking some of work load from other thread by utilizing Deque double end consumption property. So if all Thread has there *</em>own set of task Queue and they are consuming from head</strong>; helper thread can also share some work load via <strong>consumption from tail</strong>.</p>
</li>
<li><p>ConcurrentSkipListMap and ConcurrentSkipListSet<br>Just like ConcurrentHashMap provides a concurrent alternative of synchronized HashMap. <strong>ConcurrentSkipListMap and ConcurrentSkipListSet provide concurrent alternative</strong> for synchronized version of <strong>SortedMap and SortedSet</strong>. For example instead of using TreeMap or TreeSet wrapped inside synchronized Collection, You can consider using ConcurrentSkipListMap or ConcurrentSkipListSet from java.util.concurrent package. They also implement NavigableMap and NavigableSet to add additional navigation method we have seen in our post How to use NavigableMap in Java.</p>
</li>
</ul>
<h1 id="To-sort-hashmap-by-key-and-value"><a href="#To-sort-hashmap-by-key-and-value" class="headerlink" title="To sort hashmap by key and value"></a>To sort hashmap by key and value</h1><ul>
<li>Why can’t we use TreeMap in place of HashMap is the question appears in most Java programmer’s mind when they asked to sort HashMap in Java. Well, TreeMap is way slower than HashMap because it runs sorting operation with each insertion, update and removal and sometimes you don’t really need an all time sorted Map, What you need is an ability to sort any Map implementation based upon its key and value.<h2 id="Sort-by-Key"><a href="#Sort-by-Key" class="headerlink" title="Sort by Key"></a>Sort by Key</h2></li>
<li>As I said Map or HashMap in Java can be sorted either on keys or values. Sorting Map on keys is rather easy than sorting on values because Map <strong>allows duplicate values but doesn’t allow duplicates keys</strong>. You can sort Map, be it HashMap or Hashtable by copying keys into List than sorting List by using Collections.sort() method, here you can use either Comparator or Comparable based upon whether you want to sort on a custom order or natural order. </li>
<li>Once List of keys is sorted, we can create another Map, particularly LinkedHashMap to insert keys in sorted order. LinkedHashMap will maintain the order on which keys are inserted, the result is a sorted Map based on keys. This is shown in the following example by writing a generic parameterized method to sort Map based on keys. You can also sort Map in Java by using TreeMap and Google Collection API (Guava). The advantage of using Guava is that you get some flexibility on specifying ordering.<h2 id="Sorting-Map-in-Java-By-Value"><a href="#Sorting-Map-in-Java-By-Value" class="headerlink" title="Sorting Map in Java - By Value"></a>Sorting Map in Java - By Value</h2></li>
<li>To implement Collection.sort(map, new Comparator&lt;Map.Entry&lt;K,V&gt;&gt;(){ o1.getValue().compareTo(o2.getValue())</li>
<li>But need to take care of null and duplication</li>
</ul>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html</a></li>
<li><a href="http://javarevisited.blogspot.in/2011/04/difference-between-concurrenthashmap.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2011/04/difference-between-concurrenthashmap.html</a></li>
<li><a href="http://javarevisited.blogspot.com/2013/02/concurrent-collections-from-jdk-56-java-example-tutorial.html#ixzz4WBYzKelD" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2013/02/concurrent-collections-from-jdk-56-java-example-tutorial.html#ixzz4WBYzKelD</a></li>
<li><a href="http://javarevisited.blogspot.com/2012/12/how-to-sort-hashmap-java-by-key-and-value.html#ixzz4WBgfeGVM" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2012/12/how-to-sort-hashmap-java-by-key-and-value.html#ixzz4WBgfeGVM</a></li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2017-01-04-Arbitrage-vs-Hedging/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2017-01-04-Arbitrage-vs-Hedging/" class="post-title-link" itemprop="url">Arbitrage vs Heading</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="What-is-the-difference-between-arbitrage-and-hedging"><a href="#What-is-the-difference-between-arbitrage-and-hedging" class="headerlink" title="What is the difference between arbitrage and hedging?"></a>What is the difference between arbitrage and hedging?</h1><ul>
<li><strong>Hedging</strong> involves the concurrent use of more than one bet in opposite directions <strong>to limit risk</strong> of serious investment loss. </li>
<li><strong>Arbitrage is the practice of trading a price difference between more than one market for the same good in an attempt **to profit</strong> from the <strong>imbalance</strong>. 
These two concepts play important roles in finance, economics and investments.</li>
</ul>
<p>Each transaction relies involves two competing types of trades: <strong>betting</strong> short versus betting long (hedging) and *<em>buying versus selling *</em>(arbitrage). Both are used by traders who operate in volatile, dynamic market environments. Other than these two similarities, however, they are very different techniques that are used for very different purposes.</p>
<h2 id="Arbitrage"><a href="#Arbitrage" class="headerlink" title="Arbitrage"></a>Arbitrage</h2><p>Arbitrage involves <strong>both purchase and sale within a very short period of time</strong>. If a good is being sold for $100 in one market and $108 in another market, a savvy trader could purchase the $100 item and then sell it in the other market for $108. The trader enjoys <strong>a risk-free return</strong> of 8% ($8 / $100), minus any transaction or transportation expenses.</p>
<p>With the proliferation of high-speed computing technology and constant price information, arbitrage is much more difficult in financial markets than it used to be. Still, arbitrage opportunities can be found in the forex market, in bonds, in futures markets and sometimes in equities.</p>
<h2 id="Hedging"><a href="#Hedging" class="headerlink" title="Hedging"></a>Hedging</h2><p>Hedging is <strong>not the pursuit of risk-free *<em>trades; instead, it is an attempt to *</em>reduce known risks</strong> while trading. Options contacts, forward contracts, swaps and derivatives are all used by traders to purchase opposite positions in the market. By betting against both upward and downward movement, the hedger can ensure a certain amount of *<em>reduced gain or loss *</em> on a trade.</p>
<p>Hedging can take place almost anywhere, but it has become a particularly important aspect of financial markets, business management and gambling. Much like any other risk/reward trade, hedging results in lower returns for the party involved, but it can offer significant protection against downside risk.</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2017-01-17-Java-Collections-Misc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2017-01-17-Java-Collections-Misc/" class="post-title-link" itemprop="url">Java Collections Misc</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Difference-between-equals-and-deepEquals-of-Arrays-in-Java"><a href="#Difference-between-equals-and-deepEquals-of-Arrays-in-Java" class="headerlink" title="Difference between equals and deepEquals of Arrays in Java"></a>Difference between equals and deepEquals of Arrays in Java</h1><ul>
<li>Arrays.equals() method does not compare recursively if an array contains another array </li>
<li>on other hand Arrays.deepEquals() method compare recursively if an array contains another array. </li>
<li>Arrays.equals() check is if element is null or not and then calls equals() method, it does not check for Array type. </li>
<li>It’s better to use <strong>Arrays.equals()</strong> to compare <strong>non-nested</strong> Array and Arrays.<strong>deepEquals() to compare nested Array</strong>, as former is faster than later in the case of non-nested Array.</li>
</ul>
<h1 id="Checking-Array-for-duplicate-elements-Java"><a href="#Checking-Array-for-duplicate-elements-Java" class="headerlink" title="Checking Array for duplicate elements Java"></a>Checking Array for duplicate elements Java</h1><ol>
<li><p><strong>brute force</strong> method which compares each element of Array to all other elements and returns true if it founds duplicates. Though this is not an efficient choice it is the one which first comes to mind. complexity on order of O(n^2) not advised in production</p>
</li>
<li><p>Another quick way of checking if a Java array contains duplicates or not is to <strong>convert that array into Set</strong>. Since Set doesn’t allow duplicates size of  the corresponding Set will be smaller than original Array if Array contains duplicates otherwise the size of both Array and Set will be same. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List inputList = Arrays.asList(input);</span><br><span class="line">Set inputSet = <span class="keyword">new</span> HashSet(inputList);</span><br></pre></td></tr></table></figure>
</li>
<li><p>One more way to detect duplication in java array is adding every element of the <strong>array into HashSet</strong> which is a Set implementation. Since the add(Object obj) method of Set returns false if Set already contains an element to be added, it can be used to find out if the array contains duplicates in Java or not.</p>
</li>
</ol>
<ul>
<li>If you don’t prefer converting List to Set than you can still go with copying data <strong>from one ArrayList to other ArrayList ** and removing duplicates **by checking with ArrayList.contains()</strong> method.<h1 id="List-vs-Set"><a href="#List-vs-Set" class="headerlink" title="List vs Set"></a>List vs Set</h1>In short main difference between List and Set in Java is that List is an <strong>ordered</strong> collection which <strong>allows duplicates</strong> while <strong>Set is an unordered</strong> collection which <strong>doesn’t allow duplicates</strong>.</li>
</ul>
<h1 id="how-to-sort-list-in-reverse-order"><a href="#how-to-sort-list-in-reverse-order" class="headerlink" title="how to sort list in reverse order"></a>how to sort list in reverse order</h1><ul>
<li>Collections.sort(unsortedList, Collections.reverseOrder());</li>
<li>customized comparator</li>
<li>Collections.sort(unsortedList, String.CASE_INSENSITIVE_ORDER); // search insensitive order</li>
</ul>
<h1 id="Find-length-of-a-linked-list"><a href="#Find-length-of-a-linked-list" class="headerlink" title="Find length of a linked list"></a>Find length of a linked list</h1><h2 id="Iterative-Solutions"><a href="#Iterative-Solutions" class="headerlink" title="Iterative Solutions"></a>Iterative Solutions</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">int</span> count=<span class="number">0</span>;</span><br><span class="line"> Node current = <span class="keyword">this</span>.head;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">while</span>(current != <span class="keyword">null</span>)&#123;</span><br><span class="line">  count++;</span><br><span class="line">  current=current.next()</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Recursive-Solution"><a href="#Recursive-Solution" class="headerlink" title="Recursive Solution:"></a>Recursive Solution:</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">(Node current)</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(current == <span class="keyword">null</span>)&#123; <span class="comment">//base case</span></span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">1</span>+length(current.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>You can see that we have used the fact that last node will point to null to terminate the recursion. This is called the <strong>base case</strong>. It’s very important to identify a base case while coding a recursive solution, without a base case, your program will never terminate and result in StackOverFlowError.</p>
<h1 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a>Iterator</h1><ul>
<li>is nothing but a traversing object, made specifically for Collection objects like List and Set. </li>
<li>we have already aware about different kind of traversing methods like for-loop ,while loop,do-while,for each lop etc,they all are  index based traversing but as we know Java is purely object oriented language there is always possible ways of doing things <strong>using objects so Iterator is a way to traverse as well as access the data from the collection</strong>. </li>
</ul>
<h1 id="ListIterator"><a href="#ListIterator" class="headerlink" title="ListIterator"></a>ListIterator</h1><ul>
<li>in Java is an Iterator which allows user to traverse Collection like ArrayList and HashSet in both direction by using method <strong>previous() and next ()</strong>. You can obtain ListIterator from all List implementation <strong>including ArrayList and LinkedList</strong>. ListIterator doesn’t keep current index and its current position is determined by call to next() or previous() based on direction of traversing.<ul>
<li>List collection type also supports ListIterator which has add() method to add elements** in collection while Iterating. </li>
</ul>
</li>
</ul>
<h1 id="Blocking-queue"><a href="#Blocking-queue" class="headerlink" title="Blocking queue"></a>Blocking queue</h1><ul>
<li>BlockingQueue in Java doesn’t allow null elements, various implementation of BlockingQueue like ArrayBlockingQueue, LinkedBlockingQueue throws NullPointerException when you try to add null on queue.<h2 id="BlockingQueue-can-be-bounded-or-unbounded"><a href="#BlockingQueue-can-be-bounded-or-unbounded" class="headerlink" title="BlockingQueue can be bounded or unbounded."></a>BlockingQueue can be bounded or unbounded.</h2></li>
<li>A <strong>bounded</strong> BlockingQueue is one which is <strong>initialized with initial capacity</strong> and call to <strong>put() will be blocked</strong> if BlockingQueue is full and size is equal to capacity. This bounding nature makes it <strong>ideal to use a shared queue between multiple threads</strong> like in most common Producer consumer solutions in Java. </li>
<li>An <strong>unbounded Queue</strong> is one which is <strong>initialized without capacity</strong>, actually by default it initialized with Integer.MAX_VALUE. most common example of BlockingQueue uses bounded BlockingQueue as shown in below example.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BlockingQueue&lt;String&gt; bQueue = <span class="keyword">new</span> ArrayBlockingQueue&lt;String&gt;(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="BlockingQueue-implementations-like-ArrayBlockingQueue-LinkedBlockingQueue-and-PriorityBlockingQueue-are-thread-safe"><a href="#BlockingQueue-implementations-like-ArrayBlockingQueue-LinkedBlockingQueue-and-PriorityBlockingQueue-are-thread-safe" class="headerlink" title="BlockingQueue implementations like ArrayBlockingQueue, LinkedBlockingQueue and PriorityBlockingQueue are thread-safe."></a>BlockingQueue implementations like ArrayBlockingQueue, LinkedBlockingQueue and PriorityBlockingQueue are <strong>thread-safe</strong>.</h2><ul>
<li>All queuing method uses concurrency control and internal locks to perform operation atomically. </li>
</ul>
<h2 id="BlockingQueue-interface-extends-Collection-Queue-and-Iterable-interface-which-provides-it-all-Collection-and-Queue-related-methods-like-poll-and-peak-unlike-take-peek-method-returns-head-of-the-queue-without-removing-it-poll-also-retrieves-and-removes-elements-from-head-but-can-wait-till-specified-time-if-Queue-is-empty"><a href="#BlockingQueue-interface-extends-Collection-Queue-and-Iterable-interface-which-provides-it-all-Collection-and-Queue-related-methods-like-poll-and-peak-unlike-take-peek-method-returns-head-of-the-queue-without-removing-it-poll-also-retrieves-and-removes-elements-from-head-but-can-wait-till-specified-time-if-Queue-is-empty" class="headerlink" title="BlockingQueue interface extends Collection, Queue and Iterable interface which provides it all Collection and Queue related methods like poll(), and peak(), unlike take(), peek() method returns head of the queue without removing it, poll() also retrieves and removes elements from head but can wait till specified time if Queue is empty."></a>BlockingQueue interface extends Collection, Queue and Iterable interface which provides it all Collection and Queue related methods like <strong>poll(), and peak()</strong>, unlike take(), <strong>peek()</strong> method returns head of the queue <strong>without removing it</strong>, <strong>poll() also retrieves and removes elements from head but can wait till specified time if Queue is empty</strong>.</h2><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="http://javarevisited.blogspot.com/2012/12/how-to-compare-arrays-in-java-equals-deepequals-primitive-object.html#ixzz4WBifkyjg" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2012/12/how-to-compare-arrays-in-java-equals-deepequals-primitive-object.html#ixzz4WBifkyjg</a></li>
<li><a href="http://javarevisited.blogspot.in/2012/02/how-to-check-or-detect-duplicate.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2012/02/how-to-check-or-detect-duplicate.html</a></li>
<li><a href="http://javarevisited.blogspot.com/2012/12/how-to-remove-duplicates-elements-from-ArrayList-Java.html#ixzz4WBkudSwR" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2012/12/how-to-remove-duplicates-elements-from-ArrayList-Java.html#ixzz4WBkudSwR</a></li>
<li><a href="http://javarevisited.blogspot.in/2012/04/difference-between-list-and-set-in-java.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2012/04/difference-between-list-and-set-in-java.html</a></li>
<li><a href="http://javarevisited.blogspot.in/2012/01/how-to-sort-arraylist-in-java-example.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2012/01/how-to-sort-arraylist-in-java-example.html</a></li>
<li><a href="http://javarevisited.blogspot.in/2016/05/how-do-you-find-length-of-singly-linked.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2016/05/how-do-you-find-length-of-singly-linked.html</a></li>
<li><a href="http://javarevisited.blogspot.in/2011/10/java-iterator-tutorial-example-list.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2011/10/java-iterator-tutorial-example-list.html</a></li>
<li><a href="http://javarevisited.blogspot.in/2012/12/blocking-queue-in-java-example-ArrayBlockingQueue-LinkedBlockingQueue.html" target="_blank" rel="noopener">http://javarevisited.blogspot.in/2012/12/blocking-queue-in-java-example-ArrayBlockingQueue-LinkedBlockingQueue.html</a></li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2017-01-16-Java-HashMap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2017-01-16-Java-HashMap/" class="post-title-link" itemprop="url">HashMap in JDK</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Hashmap-in-JDK"><a href="#Hashmap-in-JDK" class="headerlink" title="Hashmap in JDK"></a>Hashmap in JDK</h1><h2 id="Some-note-worth-points-about-hashmap"><a href="#Some-note-worth-points-about-hashmap" class="headerlink" title="Some note worth points about hashmap"></a>Some note worth points about hashmap</h2><ul>
<li>Lookup process<ul>
<li>Step# 1: Quickly determine the bucket number in which this element may reside (using key.hashCode()).</li>
<li>Step# 2: Go over the mini-list and return the element that matches the key (using key.equals()).</li>
</ul>
</li>
<li>Immutability of keys</li>
<li>In Node&lt;K,V&gt; node of hashMap, besides key, value, hash, there is Node next link inside. So undelrying table is a linked list.</li>
<li>For <strong>get()</strong>, firstly using hashcode calculation, divide by bucket number and get reminder, to locate the bucket, then compare key via “.euqals()”, if matched, the value will be returned.</li>
<li>Load factor and resize<br>When new hashHap is being populated, the linkedList associated with each bucket of source hashMap is iterated and nodes are copied to the destination bucket. However, note that these new nodes are prepended to the head of the destination linkedList. So resizing has an side effect of reversing the order of the items in the list. Default load factor for hashMap is 0.75.</li>
<li>Worst-case performance:<br>In the worst case, a hashMap reduces to a linkedList.<br>However with Java 8, there is a change,<br>Java 8 intelligently determines if we are running in the worst-case performance scenario and converts the list into a binary search tree.</li>
<li>Collisions<br>Collisions happen when 2 distinct keys generate the same hashCode() value. Multiple collisions are the result of bad hashCode() algorithm.There are many collision-resolution strategies - chaining, double-hashing, clustering.<br>However, java has chosen chaining strategy for hashMap, so in case of collisions, items are chained together just like in a linkedList.</li>
<li>Some specialized hashMaps for specific purposes:</li>
<li><ul>
<li>ConcurrentHashMap: HashMap to be used in multithreaded applications.</li>
</ul>
</li>
<li><ul>
<li>EnumMap: HashMap with Enum values as keys.</li>
</ul>
</li>
<li><ul>
<li>LinkedHashMap: HashMap with predictable iteration order (great for FIFO/LIFO caches)</li>
</ul>
</li>
</ul>
<h2 id="WeakReferenceMap-SoftReference-Map-etc"><a href="#WeakReferenceMap-SoftReference-Map-etc" class="headerlink" title="WeakReferenceMap, SoftReference Map etc."></a>WeakReferenceMap, SoftReference Map etc.</h2><p>Weak references (a WeakHashMap) aren’t particularly good for this either, because as the elements in the cache become dereferenced by the application code they will quickly be removed from the cache by the garbage collector. This basically means there will be cache faults often (in other words, the cache lookups will fail).</p>
<p>Soft references can be very handy in situations such as this. Because soft references only exist if the memory is available, they can make very effective use of the space that is available. Unfortunately, although there is a WeakHashMap , there is no java.util.SoftHashMap . Why? I’m not really sure. Thankfully, a little trip back over to Jakarta-Commons-Collections digs up the org.apache.commons.collections.map.ReferenceMap .</p>
<p>SoftReferences are typically used for implementing memory caching. The JVM should try to keep softly referenced objects in memory as long as possible, and when memory is low clear the oldest soft references first. According to the JavaDoc, there are no guarantees though.</p>
<p>WeakReferences is the reference type I use most frequently. It’s typically used when you want weak listeners or if you want to connect additional information to an object (using WeakHashMap for example). Very useful stuff when you want to reduce class coupling. </p>
<p>Phantom references can be used to perform pre-garbage collection actions such as freeing resources. Instead, people usually use the finalize() method for this which is not a good idea. Finalizers have a horrible impact on the performance of the garbage collector and can break data integrity of your application if you’re not very careful since the “finalizer” is invoked in a random thread, at a random time.</p>
<p>In the constructor of a phantom reference, you specify a ReferenceQueue where the phantom references are enqueued once the referenced objects becomes “phantom reachable”. Phantom reachable means unreachable other than through the phantom reference. The initially confusing thing is that although the phantom reference continues to hold the referenced object in a private field (unlike soft or weak references), its getReference() method always returns null. This is so that you cannot make the object strongly reachable again.</p>
<p>From time to time, you can poll the ReferenceQueue and check if there are any new PhantomReferences whose referenced objects have become phantom reachable. In order to be able to to anything useful, one can for example derive a class from java.lang.ref.PhantomReference that references resources that should be freed before garbage collection. The referenced object is only garbage collected once the phantom reference becomes unreachable itself. </p>
<h2 id="Source-code-analysis"><a href="#Source-code-analysis" class="headerlink" title="Source code analysis"></a>Source code analysis</h2><h3 id="Internal-data-structure"><a href="#Internal-data-structure" class="headerlink" title="Internal data structure"></a>Internal data structure</h3><ul>
<li>transient Entry&lt;K, V&gt;[] elementData;</li>
<li>transient int modCount = 0;</li>
<li>private transient V[] cache;</li>
</ul>
<h3 id="Put"><a href="#Put" class="headerlink" title="Put"></a>Put</h3><p>It will call return putImpl(key, value); directly</p>
<h4 id="V-putImpl-K-key-V-value"><a href="#V-putImpl-K-key-V-value" class="headerlink" title="V putImpl(K key, V value)"></a>V putImpl(K key, V value)</h4><ul>
<li>if(key == null)</li>
<li><ul>
<li>entry = findNullKeyEntry();<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">entry = findNullKeyEntry();</span><br><span class="line">            <span class="keyword">if</span> (entry == <span class="keyword">null</span>) &#123;</span><br><span class="line">                modCount++;</span><br><span class="line">                entry = createHashedEntry(<span class="keyword">null</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span> (++elementCount &gt; threshold) &#123;</span><br><span class="line">                    rehash();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<p>— findNullKeyEntry<br>Iterate the internal array to locate null entry</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> Entry&lt;K,V&gt; <span class="title">findNullKeyEntry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Entry&lt;K,V&gt; m = elementData[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">while</span> (m != <span class="keyword">null</span> &amp;&amp; m.key != <span class="keyword">null</span>) &#123;</span><br><span class="line">            m = m.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>else (if key is not null)</li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2017-01-19-Java-NavigableMap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2017-01-19-Java-NavigableMap/" class="post-title-link" itemprop="url">NavigableMap Misc</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="What-is-NavigableMap"><a href="#What-is-NavigableMap" class="headerlink" title="What is NavigableMap"></a>What is NavigableMap</h1><ul>
<li>NavigableMap in <strong>Java 6</strong> is an <strong>extension of SortedMap</strong>  like TreeMap which provides convenient navigation method like lowerKey, floorKey, ceilingKey and higherKey. </li>
<li>NavigableMap is added on Java 1.6 and along with these popular navigation method it also provide ways <strong>to create a Sub Map from existing Map</strong> in Java e.g. <strong>headMap whose keys are less than specified key</strong>, <strong>tailMap whose keys are greater than specified key and a subMap which is strictly contains keys which falls between toKey and fromKey</strong>. All of these methods also provides a boolean to include specified key or not. TreeMap and ConcurrentSkipListMap are two concrete implementation of NavigableMap in Java 1.6 API.</li>
</ul>
<h1 id="use-NavigableMap"><a href="#use-NavigableMap" class="headerlink" title="use NavigableMap"></a>use NavigableMap</h1><p>How to create subMap from Map using Navigable Map in Java with Example<br>In this Java tutorial we will explore some API methods of NavigableMap to show its functionality. This Java program shows example of lowerKey which returns keys less than specified, floorKey returns key less than or equal to, ceilingKey return greater than or equal to and higherKey which returns keys which are greater than specified key. </p>
<p>This Java example also demonstrate use of headMap(), tailMap() and subMap() method which is used to create Map from an existing Map in Java. headMap returns a Map whose keys are lower than specified keys while tailMap returns Map which contains keys, those are higher than specified. Here is complete code example of How to use NavigableMap in Java.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.NavigableMap;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Java program to demonstrate What is NavigableMap in Java and How to use NavigableMap</span></span><br><span class="line"><span class="comment"> * in Java. NavigableMap provides two important features navigation methods</span></span><br><span class="line"><span class="comment"> * like lowerKey(), floorKey, ceilingKey() and higherKey().</span></span><br><span class="line"><span class="comment"> * There Entry counterpart and methods to create subMap e.g. headMap(), tailMap()</span></span><br><span class="line"><span class="comment"> * and subMap().</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Javin Paul</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NavigableMapExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//NavigableMap extends SortedMap to provide useful navigation methods</span></span><br><span class="line">        NavigableMap&lt;String, String&gt; navigableMap = <span class="keyword">new</span> TreeMap&lt;String, String&gt;();</span><br><span class="line">     </span><br><span class="line">        navigableMap.put(<span class="string">"C++"</span>, <span class="string">"Good programming language"</span>);</span><br><span class="line">        navigableMap.put(<span class="string">"Java"</span>, <span class="string">"Another good programming language"</span>);</span><br><span class="line">        navigableMap.put(<span class="string">"Scala"</span>, <span class="string">"Another JVM language"</span>);</span><br><span class="line">        navigableMap.put(<span class="string">"Python"</span>, <span class="string">"Language which Google use"</span>);</span><br><span class="line">     </span><br><span class="line">        System.out.println(<span class="string">"SorteMap : "</span> + navigableMap);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//lowerKey returns key which is less than specified key</span></span><br><span class="line">        System.out.println(<span class="string">"lowerKey from Java : "</span> + navigableMap.lowerKey(<span class="string">"Java"</span>));</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//floorKey returns key which is less than or equal to specified key</span></span><br><span class="line">        System.out.println(<span class="string">"floorKey from Java: "</span> + navigableMap.floorKey(<span class="string">"Java"</span>));</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//ceilingKey returns key which is greater than or equal to specified key</span></span><br><span class="line">        System.out.println(<span class="string">"ceilingKey from Java: "</span> + navigableMap.ceilingKey(<span class="string">"Java"</span>));</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//higherKey returns key which is greater specified key</span></span><br><span class="line">        System.out.println(<span class="string">"higherKey from Java: "</span> + navigableMap.higherKey(<span class="string">"Java"</span>));</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">        <span class="comment">//Apart from navigagtion methodk, it also provides useful method</span></span><br><span class="line">        <span class="comment">//to create subMap from existing Map e.g. tailMap, headMap and subMap</span></span><br><span class="line">     </span><br><span class="line">        <span class="comment">//an example of headMap - returns NavigableMap whose key is less than specified</span></span><br><span class="line">        NavigableMap&lt;String, String&gt; headMap = navigableMap.headMap(<span class="string">"Python"</span>, <span class="keyword">false</span>);</span><br><span class="line">        System.out.println(<span class="string">"headMap created form navigableMap : "</span> + headMap);</span><br><span class="line">             </span><br><span class="line">        <span class="comment">//an example of tailMap - returns NavigableMap whose key is greater than specified</span></span><br><span class="line">        NavigableMap&lt;String, String&gt; tailMap = navigableMap.tailMap(<span class="string">"Scala"</span>, <span class="keyword">false</span>);</span><br><span class="line">        System.out.println(<span class="string">"tailMap created form navigableMap : "</span> + tailMap);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//an example of subMap - return NavigableMap from toKey to fromKey</span></span><br><span class="line">        NavigableMap&lt;String, String&gt; subMap = navigableMap.subMap(<span class="string">"C++"</span>, <span class="keyword">false</span> ,</span><br><span class="line">                                                                  <span class="string">"Python"</span>, <span class="keyword">false</span>);</span><br><span class="line">        System.out.println(<span class="string">"subMap created form navigableMap : "</span> + subMap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">SorteMap : &#123;C++=Good programming language, Java=Another good programming language, Python=Language which Google use, Scala=Another JVM language&#125;</span><br><span class="line">lowerKey from Java : C++</span><br><span class="line">floorKey from Java: Java</span><br><span class="line">ceilingKey from Java: Java</span><br><span class="line">higherKey from Java: Python</span><br><span class="line">headMap created form navigableMap : &#123;C++=Good programming language, Java=Another good programming language&#125;</span><br><span class="line">tailMap created form navigableMap : &#123;&#125;</span><br><span class="line">subMap created form navigableMap : &#123;Java=Another good programming language&#125;</span><br></pre></td></tr></table></figure>

<p> That’s all on What is NavigableMap in Java and How to use NavigableMap with example. We have seen examples of popular navigation method on TreeMap e.g. floorKey. You can also use similar method like lowerEntry, floorEntry, ceilingEntry and higherEntry to retrieve Entry instead of key. NavigableMap is also a good utility to create subset of a Map in Java.</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="http://javarevisited.blogspot.com/2013/01/what-is-navigablemap-in-java-6-example-submap-head-tail.html#ixzz4WBdqjJCC" target="_blank" rel="noopener">http://javarevisited.blogspot.com/2013/01/what-is-navigablemap-in-java-6-example-submap-head-tail.html#ixzz4WBdqjJCC</a></p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.todzhang.com/2017-01-19-Compare-In-Java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Todd Zhang">
      <meta itemprop="description" content="Contact me via phray.zhang@gmail.com or wechat at helloworld_2000">
      <meta itemprop="image" content="/images/globe.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Clouds & Docker">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2017-01-19-Compare-In-Java/" class="post-title-link" itemprop="url">Compare-In-Java</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-05-31 23:03:27" itemprop="dateCreated datePublished" datetime="2019-05-31T23:03:27+10:00">2019-05-31</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h1><ul>
<li>If you implement Comparable interface and override compareTo() method it <strong>must be consistent with equals()</strong> method i.e. for equal object by equals() method compareTo() must return zero. failing to so will affect contract of SortedSet e.g. TreeSet and SortedMap like TreeMap, which uses compareTo() method for checking equality</li>
<li>Remember to use Collections.reverseOrder() comparator for sorting Object in reverse order or descending order, as shown in this example.</li>
<li>Use Generics while implementing Comparator and Comparable interface, that prevents error of accidentally overloading compareTo() and compare() method instead of overriding it because both of these methods accept Object as a parameter. By using Generics and @Override annotation we effectively remove that subtle error.</li>
</ul>
<h1 id="Comparable-vs-Comparator"><a href="#Comparable-vs-Comparator" class="headerlink" title="Comparable vs Comparator"></a>Comparable vs Comparator</h1><ol>
<li>Comparator in Java is defined in java.util package while Comparable interface in Java is defined in java.lang package, which very much says that Comparator should be used as an utility to sort objects which Comparable should be provided by default</li>
<li>Comparator interface in Java has method public int compare (Object o1, Object o2) which returns a negative integer, zero, or a positive integer as the first argument is less than, equal to, or greater than the second. While Comparable interface has method public int compareTo(Object o) which returns a negative integer, zero, or a positive integer as this object is less than, equal to, or greater than the specified object.</li>
<li>If any class implement Comparable interface in Java then collection of that object either List or Array can be sorted automatically by using  Collections.sort() or Arrays.sort() method and object will be sorted based on there natural order defined by CompareTo method.</li>
<li>Objects which implement Comparable in Java  can be used as keys in a SortedMap like TreeMap or elements in a SortedSet  for example TreeSet, without specifying any Comparator.</li>
<li>Generally you should not use difference of integers to decide output of compareTo method as result of *<em>integer subtraction can overflow *</em> but if you are sure that both operands are positive then its one of the quickest way to compare two objects. </li>
<li>Some time you write code to sort object of a class for which you are not the original author, or you don’t have access to code. In these cases you can not implement Comparable and Comparator is only way to sort those objects.</li>
<li>Beware with the fact that How those object will behave if stored in SorteSet or SortedMap like TreeSet and TreeMap. If an object doesn’t implement Comparable than while putting them into SortedMap, always provided corresponding Comparator which can provide sorting logic.</li>
<li>Comparator has a distinct advantage of being self descriptive  for example if you are writing Comparator to compare two Employees based upon there salary than name that comparator as SalaryComparator, on the other hand compareTo()</li>
</ol>
<p>So in Summary if you want to sort objects based on <strong>natural order then use Comparable</strong> in Java and if you want to *<em>sort on some other attribute of object then use Comparator *</em> in Java.</p>
<h1 id="Samples-of-Java-class"><a href="#Samples-of-Java-class" class="headerlink" title="Samples of Java class"></a>Samples of Java class</h1><ul>
<li>How to Compare String in Java<br>String is immutable in Java and one of the most used value class. For comparing String in Java we should not be worrying because String implements Comparable interface and provides a lexicographic implementation for CompareTo method which compare two strings based on contents of characters or you can say in lexical order. You just need to call String.compareTo(AnotherString) and Java will determine whether specified String is greater than , equal to or less than current object. </li>
<li>Dates are represented by java.util.Date class in Java and like String,  Date also implements Comparable in Java so they will be automatically sorted based on there natural ordering if they got stored in any sorted collection like TreeSet or TreeMap. If you explicitly wants to compare two dates in Java you can call Date.compareTo(AnotherDate) method in Java and it will tell whether specified date is greater than , equal to or less than current String.</li>
</ul>
<h1 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h1><p>One example where compareTo is not consistent with equals in JDK is BigDecimal class. two BigDecimal number for which compareTo returns zero, equals returns false as clear from following BigDecimal comparison example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal bd1 = <span class="keyword">new</span> BigDecimal(<span class="string">"2.0"</span>);</span><br><span class="line">BigDecimal bd2 = <span class="keyword">new</span> BigDecimal(<span class="string">"2.00"</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"comparing BigDecimal using equals: "</span> + bd1.equals(bd2));</span><br><span class="line">System.out.println(<span class="string">"comparing BigDecimal using compareTo: "</span> + bd1.compareTo(bd2));</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line"></span><br><span class="line">comparing BigDecimal using equals: <span class="keyword">false</span></span><br><span class="line">comparing BigDecimal using compareTo: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p> How does it affect BigDecimal ? well if you store these two BigDecimal in HashSet you will end up with duplicates (violation of Set Contract) i.e. two elements while if you store them in TreeSet you will end up with just 1 element because HashSet uses equals to check duplicates while TreeSet uses compareTo to check duplicates. That’s why its suggested to keep compareTo consistent with equals method in java.</p>
<ul>
<li>Another important point to note is don’t use subtraction for comparing integral values because result of subtraction can overflow as every int operation in Java is modulo 2^32. use either Integer.compareTo()  or logical operators for comparison. </li>
<li>In summary compareTo should provide natural ordering and compareTo must be consistent with equals() method in Java. </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Java program to test Object sorting in Java. This Java program</span></span><br><span class="line"><span class="comment"> * test Comparable and Comparator implementation provided by Order</span></span><br><span class="line"><span class="comment"> * class by sorting list of Order object in ascending and descending order.</span></span><br><span class="line"><span class="comment"> * Both in natural order using Comparable and custom Order using Comparator in Java</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> http://java67.blogspot.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectSortingExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//Creating Order object to demonstrate Sorting of Object in Java</span></span><br><span class="line">        Order ord1 = <span class="keyword">new</span> Order(<span class="number">101</span>,<span class="number">2000</span>, <span class="string">"Sony"</span>);</span><br><span class="line">        Order ord2 = <span class="keyword">new</span> Order(<span class="number">102</span>,<span class="number">4000</span>, <span class="string">"Hitachi"</span>);</span><br><span class="line">        Order ord3 = <span class="keyword">new</span> Order(<span class="number">103</span>,<span class="number">6000</span>, <span class="string">"Philips"</span>);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//putting Objects into Collection to sort</span></span><br><span class="line">        List&lt;Order&gt; orders = <span class="keyword">new</span> ArrayList&lt;Order&gt;();</span><br><span class="line">        orders.add(ord3);</span><br><span class="line">        orders.add(ord1);</span><br><span class="line">        orders.add(ord2);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//printing unsorted collection</span></span><br><span class="line">        System.out.println(<span class="string">"Unsorted Collection : "</span> + orders);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//Sorting Order Object on natural order - ascending</span></span><br><span class="line">        Collections.sort(orders);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">//printing sorted collection</span></span><br><span class="line">        System.out.println(<span class="string">"List of Order object sorted in natural order : "</span> + orders);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">// Sorting object in descending order in Java</span></span><br><span class="line">        Collections.sort(orders, Collections.reverseOrder());</span><br><span class="line">        System.out.println(<span class="string">"List of object sorted in descending order : "</span> + orders);</span><br><span class="line">             </span><br><span class="line">        <span class="comment">//Sorting object using Comparator in Java</span></span><br><span class="line">        Collections.sort(orders, <span class="keyword">new</span> Order.OrderByAmount());</span><br><span class="line">        System.out.println(<span class="string">"List of Order object sorted using Comparator - amount : "</span> + orders);</span><br><span class="line">     </span><br><span class="line">        <span class="comment">// Comparator sorting Example - Sorting based on customer</span></span><br><span class="line">        Collections.sort(orders, <span class="keyword">new</span> Order.OrderByCustomer());</span><br><span class="line">        System.out.println(<span class="string">"Collection of Orders sorted using Comparator - by customer : "</span> + orders);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Order class is a domain object which implements</span></span><br><span class="line"><span class="comment"> * Comparable interface to provide sorting on the natural order.</span></span><br><span class="line"><span class="comment"> * Order also provides couple of custom Comparators to</span></span><br><span class="line"><span class="comment"> * sort object based upon amount and customer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Order</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> orderId;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> amount;</span><br><span class="line">    <span class="keyword">private</span> String customer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Comparator implementation to Sort Order object based on Amount</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderByAmount</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Order</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Order o1, Order o2)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> o1.amount &gt; o2.amount ? <span class="number">1</span> : (o1.amount &lt; o2.amount ? -<span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Anohter implementation or Comparator interface to sort list of Order object</span></span><br><span class="line"><span class="comment">     * based upon customer name.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderByCustomer</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Order</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Order o1, Order o2)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> o1.customer.compareTo(o2.customer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Order</span><span class="params">(<span class="keyword">int</span> orderId, <span class="keyword">int</span> amount, String customer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.orderId = orderId;</span><br><span class="line">        <span class="keyword">this</span>.amount = amount;</span><br><span class="line">        <span class="keyword">this</span>.customer = customer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAmount</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> amount; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAmount</span><span class="params">(<span class="keyword">int</span> amount)</span> </span>&#123;<span class="keyword">this</span>.amount = amount;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCustomer</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> customer;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCustomer</span><span class="params">(String customer)</span> </span>&#123;<span class="keyword">this</span>.customer = customer;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrderId</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> orderId;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrderId</span><span class="params">(<span class="keyword">int</span> orderId)</span> </span>&#123;<span class="keyword">this</span>.orderId = orderId;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Sorting on orderId is natural sorting for Order.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Order o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.orderId &gt; o.orderId ? <span class="number">1</span> : (<span class="keyword">this</span>.orderId &lt; o.orderId ? -<span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * implementing toString method to print orderId of Order</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(orderId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Output</span><br><span class="line">Unsorted Collection : [<span class="number">103</span>, <span class="number">101</span>, <span class="number">102</span>]</span><br><span class="line">List of Order object sorted in natural order : [<span class="number">101</span>, <span class="number">102</span>, <span class="number">103</span>]</span><br><span class="line">List of object sorted in descending order : [<span class="number">103</span>, <span class="number">102</span>, <span class="number">101</span>]</span><br><span class="line">List of Order object sorted using Comparator - amount : [<span class="number">101</span>, <span class="number">102</span>, <span class="number">103</span>]</span><br><span class="line">Collection of Orders sorted using Comparator - by customer : [<span class="number">102</span>, <span class="number">103</span>, <span class="number">101</span>]</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="http://www.java67.com/2012/10/how-to-sort-object-in-java-comparator-comparable-example.html" target="_blank" rel="noopener">http://www.java67.com/2012/10/how-to-sort-object-in-java-comparator-comparable-example.html</a></li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" src="/images/globe.gif" alt="Todd Zhang">
  <p class="site-author-name" itemprop="name">Todd Zhang</p>
  <div class="site-description motion-element" itemprop="description">Contact me via phray.zhang@gmail.com or wechat at helloworld_2000</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">151</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">127</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Todd Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.3.0</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>

<script src="/js/schemes/pisces.js?v=7.3.0"></script>


<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  

  


  
</body>
</html>
